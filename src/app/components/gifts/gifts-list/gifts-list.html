<h3>Gifts List</h3>

@if(errorMsg){
<div class="alert alert-danger">{{errorMsg}}</div>
}

<<<<<<< Updated upstream
=======
<div class="filter-section">
  <h4>Filter & Sort Gifts</h4>
  <div class="filter-inputs">
    <input 
      type="text" 
      [(ngModel)]="filter.giftName" 
      placeholder="Filter by Gift Name"
      (input)="applyFilters()"
    />
    <input 
      type="text" 
      [(ngModel)]="filter.donorName" 
      placeholder="Filter by Donor Name"
      (input)="applyFilters()"
    />
    <input 
      type="text" 
      [(ngModel)]="filter.category" 
      placeholder="Filter by Category"
      (input)="applyFilters()"
    />
    
    <select [(ngModel)]="filter.sortBy" (change)="applyFilters()">
      <option [ngValue]="undefined">No Sorting</option>
      <option [ngValue]="GiftSortBy.Price">Sort by Price</option>
      <option [ngValue]="GiftSortBy.PurchasesCount">Sort by Purchases Count</option>
    </select>
    
    <label>
      <input 
        type="checkbox" 
        [(ngModel)]="filter.desc" 
        (change)="applyFilters()"
        [disabled]="!filter.sortBy"
      />
      Descending
    </label>
    
    <button (click)="clearFilters()">Clear Filters</button>
  </div>
</div>

>>>>>>> Stashed changes
<table class="table-bordered">
  <thead>
    <tr>
      <th>Gift ID</th>
      <th>Gift Name</th>
      <th>Donor Name</th>
      <th>Card Price</th>
      <th>Category</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    @for(g of gifts$ | async; track g.id){
      <tr>
        <td>{{g.id}}</td>
        <td>{{g.name}}</td>
        <td>{{g.donorName}}</td>
        <td>{{g.cardPrice}}</td>
        <td>{{g.category}}</td>
        <td>

          @if (isManager()) {
            <button (click)="removeGift(g.id)">âŒ</button>
            <button (click)="updateGift(g.id)">âœï¸</button>
            <button (click)="raffleGift(g.id)" [disabled]="g.isRaffled">
              ğŸ² ×‘×¦×¢ ×”×’×¨×œ×”
            </button>
          } @else {
            @if (g.isRaffled) {
              @if (getWinnerName(g.id)) {
                <div class="winner-label">ğŸ† Winner: {{ getWinnerName(g.id) }}</div>
              } @else {
                <div class="raffled-label">âœ… ×”×•×’×¨×œ×”</div>
              }
            } @else {
              <button (click)="addToCart(g.id)">Add to Cart</button>
            }
          }
        </td>

      </tr>
    }
  </tbody>
</table>

<!-- ×”×¦×’×ª ×”×•×“×¢×ª ×©×’×™××” -->
@if (errorMsg) {
  <div class="error-message">
    {{ errorMsg }}
  </div>
}

@if(isManager()){
<button (click)="id = 0">â• Add Gift</button>
}

\
@if(isManager()){
  <button (click)="downloadPdf()">ğŸ“„ ×”×¤×§×ª ×“×•×— ×–×•×›×™×</button>
}
@if(isManager()){
  <button (click)="raffleAll()">ğŸ² ×‘×¦×¢ ×”×’×¨×œ×” ×œ×›×œ ×”××ª× ×•×ª</button>
}

@if(id >= 0){
<app-gift [(selectedId)]="id" (selectedIdChange)="onGiftSaved($event)"></app-gift>
}