<div>
  <h2>Shopping Cart</h2>

  @if (errorMsg) {
    <div style="color:red">{{ errorMsg }}</div>
  }

  @if (shoppings$ | async; as shoppings) {
    
    @if (shoppings.length === 0) {
      <p>No purchases</p>
    } @else {
      
      <table class="table-bordered">
        <thead>
          <tr>
            <th>Gift Name</th>
            <th>Card Price</th>
            <th>Quantity</th>
            <th>Total</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (shopping of shoppings; track shopping.id) {
            <tr>
              <td>{{ shopping.giftName }}</td>
              <td>{{ shopping.cardPrice }}</td>
              <td>{{ shopping.quantity }}</td>
              <td>{{ shopping.cardPrice * shopping.quantity }}</td>
              <td>
                <button (click)="confirmShopping(shopping)">✅</button>
                <button (click)="removeShopping(shopping)">❌</button>
              </td>
            </tr>
          }
        </tbody>
      </table>

      <div class="total-section">
        <h3>Total to Pay: {{ getTotalPrice(shoppings) }}</h3>
      </div>
      
    }
    
  }

</div>