2026-01-04 02:10:38.864 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 02:10:39.527 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 02:10:39.531 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 02:10:39.630 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 02:10:39.633 +02:00 [INF] Hosting environment: Development
2026-01-04 02:10:39.638 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 02:10:40.502 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 02:10:41.161 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 02:10:41.161 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 02:10:41.197 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 700.5639ms
2026-01-04 02:10:41.278 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 120.644ms
2026-01-04 02:10:41.398 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 242.6444ms
2026-01-04 02:10:41.468 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 02:10:41.636 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 169.2534ms
2026-01-04 02:13:22.071 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 02:13:22.495 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 02:13:22.500 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 02:13:22.601 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 02:13:22.604 +02:00 [INF] Hosting environment: Development
2026-01-04 02:13:22.610 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 02:13:23.232 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 02:13:23.731 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 510.7936ms
2026-01-04 02:13:23.756 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 02:13:23.757 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 02:13:23.777 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 21.8043ms
2026-01-04 02:13:23.862 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 104.3328ms
2026-01-04 02:13:23.994 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 02:13:24.084 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 91.3379ms
2026-01-04 02:13:41.605 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2026-01-04 02:13:41.825 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2026-01-04 02:13:41.909 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2026-01-04 02:13:42.857 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2026-01-04 02:13:43.110 +02:00 [INF] Validating user login for r@r
2026-01-04 02:13:46.635 +02:00 [INF] Executed DbCommand (192ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2026-01-04 02:13:47.620 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 4751.4673ms.
2026-01-04 02:13:47.640 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:13:47.665 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 5739.1034ms
2026-01-04 02:13:47.674 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2026-01-04 02:13:47.693 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 6089.0163ms
2026-01-04 02:14:56.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 02:14:56.195 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:14:56.216 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:14:56.286 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:14:56.302 +02:00 [INF] Fetching all users
2026-01-04 02:14:56.414 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2026-01-04 02:14:56.429 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 133.8847ms.
2026-01-04 02:14:56.439 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.User, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 02:14:56.490 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 262.2556ms
2026-01-04 02:14:56.497 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:14:56.502 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 200 null application/json; charset=utf-8 461.4278ms
2026-01-04 02:15:42.396 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User/9 - null null
2026-01-04 02:15:42.452 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:15:42.470 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:15:42.529 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:15:42.535 +02:00 [INF] Fetching user 9
2026-01-04 02:15:42.659 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:15:42.668 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 135.1538ms.
2026-01-04 02:15:42.674 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.User'.
2026-01-04 02:15:42.678 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 200.1932ms
2026-01-04 02:15:42.702 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:15:42.719 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User/9 - 200 null application/json; charset=utf-8 327.8955ms
2026-01-04 02:16:40.374 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/9 - application/json 216
2026-01-04 02:16:40.417 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:16:40.436 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:16:40.473 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:16:40.494 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 46.8395ms
2026-01-04 02:16:40.506 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:16:40.541 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/9 - 400 null application/json; charset=utf-8 166.8768ms
2026-01-04 02:18:10.137 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/1 - application/json 162
2026-01-04 02:18:10.208 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:18:10.213 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:18:10.221 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:18:10.225 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 7.0904ms
2026-01-04 02:18:10.230 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:18:10.233 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/1 - 400 null application/json; charset=utf-8 96.9563ms
2026-01-04 02:18:15.174 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/1 - application/json 162
2026-01-04 02:18:15.182 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:18:15.187 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:18:15.196 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:18:15.204 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 11.0936ms
2026-01-04 02:18:15.211 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:18:15.217 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/1 - 400 null application/json; charset=utf-8 43.0298ms
2026-01-04 02:18:43.043 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/3 - application/json 174
2026-01-04 02:18:43.060 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:18:43.066 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:18:43.075 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:18:43.081 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 7.16ms
2026-01-04 02:18:43.116 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:18:43.127 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/3 - 400 null application/json; charset=utf-8 99.8837ms
2026-01-04 02:18:53.476 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/3 - application/json 174
2026-01-04 02:18:53.504 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:18:53.510 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:18:53.517 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:18:53.522 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 6.2323ms
2026-01-04 02:18:53.528 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:18:53.531 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/3 - 400 null application/json; charset=utf-8 55.0114ms
2026-01-04 02:19:10.680 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 02:19:10.698 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:19:10.705 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:19:10.775 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:19:10.781 +02:00 [INF] Fetching all users
2026-01-04 02:19:10.806 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2026-01-04 02:19:10.815 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.2269ms.
2026-01-04 02:19:10.821 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.User, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 02:19:10.824 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 110.2532ms
2026-01-04 02:19:10.830 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:19:10.833 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 200 null application/json; charset=utf-8 155.8685ms
2026-01-04 02:19:34.634 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 02:19:34.656 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:19:34.658 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:19:34.713 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:19:34.721 +02:00 [INF] Fetching all users
2026-01-04 02:19:34.751 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2026-01-04 02:19:34.768 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 46.2718ms.
2026-01-04 02:19:34.780 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.User, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 02:19:34.793 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 128.3228ms
2026-01-04 02:19:34.834 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:19:34.847 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 200 null application/json; charset=utf-8 212.2903ms
2026-01-04 02:19:57.380 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User/9 - null null
2026-01-04 02:19:57.422 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:19:57.426 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:19:57.466 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:19:57.473 +02:00 [INF] Fetching user 9
2026-01-04 02:19:57.501 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:19:57.510 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 37.3088ms.
2026-01-04 02:19:57.515 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.User'.
2026-01-04 02:19:57.519 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 86.0592ms
2026-01-04 02:19:57.526 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:19:57.532 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User/9 - 200 null application/json; charset=utf-8 152.1867ms
2026-01-04 02:20:37.646 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/9 - application/json 139
2026-01-04 02:20:37.695 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:20:37.698 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:20:37.710 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:20:37.715 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 9.8807ms
2026-01-04 02:20:37.723 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:20:37.729 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/9 - 400 null application/json; charset=utf-8 83.1192ms
2026-01-04 02:21:20.201 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/9 - application/json 141
2026-01-04 02:21:20.238 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:21:20.245 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:21:20.261 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:21:20.269 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 11.1176ms
2026-01-04 02:21:20.307 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:21:20.315 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/9 - 400 null application/json; charset=utf-8 116.2123ms
2026-01-04 02:21:30.573 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/9 - application/json 141
2026-01-04 02:21:30.597 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:21:30.607 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:21:30.654 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Put (WebApiProject) - Validation state: "Valid"
2026-01-04 02:21:30.660 +02:00 [INF] Updating user 9
2026-01-04 02:21:30.682 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:21:31.009 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [PasswordHash] = @p1, [Phone] = @p2, [Role] = @p3, [UserName] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-04 02:21:31.059 +02:00 [INF] User 9 updated successfully
2026-01-04 02:21:31.065 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Put (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkResult in 407.7257ms.
2026-01-04 02:21:31.079 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2026-01-04 02:21:31.083 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 463.4792ms
2026-01-04 02:21:31.086 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:21:31.091 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/9 - 200 0 null 518.0684ms
2026-01-04 02:21:37.565 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User/9 - null null
2026-01-04 02:21:37.581 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:21:37.587 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:21:37.650 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:21:37.654 +02:00 [INF] Fetching user 9
2026-01-04 02:21:37.669 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:21:37.676 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.9631ms.
2026-01-04 02:21:37.683 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.User'.
2026-01-04 02:21:37.690 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 90.5466ms
2026-01-04 02:21:37.716 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:21:37.729 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User/9 - 200 null application/json; charset=utf-8 164.6315ms
2026-01-04 02:22:11.496 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/1 - application/json 141
2026-01-04 02:22:11.530 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:22:11.534 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:22:11.573 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Put (WebApiProject) - Validation state: "Valid"
2026-01-04 02:22:11.576 +02:00 [INF] Updating user 1
2026-01-04 02:22:11.598 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:22:11.631 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [PasswordHash] = @p1, [Phone] = @p2, [Role] = @p3, [UserName] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-04 02:22:11.705 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-04 02:22:12.086 +02:00 [ERR] Error while updating user 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebApiProject.DAL.UserDAL.Put(User user) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\DAL\UserDAL.cs:line 36
   at WebApiProject.BLL.UserBLLService.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\UserBLLService.cs:line 97
2026-01-04 02:22:12.529 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 990.7035ms
2026-01-04 02:22:12.536 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:22:12.551 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebApiProject.DAL.UserDAL.Put(User user) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\DAL\UserDAL.cs:line 36
   at WebApiProject.BLL.UserBLLService.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\UserBLLService.cs:line 97
   at WebApiProject.Controllers.UserController.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\UserController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 02:22:12.614 +02:00 [ERR] Error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebApiProject.DAL.UserDAL.Put(User user) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\DAL\UserDAL.cs:line 36
   at WebApiProject.BLL.UserBLLService.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\UserBLLService.cs:line 97
   at WebApiProject.Controllers.UserController.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\UserController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 02:22:12.664 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/1 - 500 null application/json; charset=utf-8 1168.0122ms
2026-01-04 02:22:32.604 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/1 - application/json 140
2026-01-04 02:22:32.614 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:22:32.618 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:22:32.667 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Put (WebApiProject) - Validation state: "Valid"
2026-01-04 02:22:32.672 +02:00 [INF] Updating user 1
2026-01-04 02:22:32.679 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:22:32.693 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [PasswordHash] = @p1, [Phone] = @p2, [Role] = @p3, [UserName] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-04 02:22:32.700 +02:00 [INF] User 1 updated successfully
2026-01-04 02:22:32.704 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Put (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkResult in 32.1752ms.
2026-01-04 02:22:32.708 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2026-01-04 02:22:32.711 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 89.6365ms
2026-01-04 02:22:32.716 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:22:32.719 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/1 - 200 0 null 115.7961ms
2026-01-04 02:23:40.827 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/1 - application/json 141
2026-01-04 02:23:40.849 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:23:40.852 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:23:40.887 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Put (WebApiProject) - Validation state: "Valid"
2026-01-04 02:23:40.891 +02:00 [INF] Updating user 1
2026-01-04 02:23:40.916 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:23:40.950 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 450), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Email] = @p0, [PasswordHash] = @p1, [Phone] = @p2, [Role] = @p3, [UserName] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-04 02:23:40.972 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2026-01-04 02:23:41.237 +02:00 [ERR] Error while updating user 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebApiProject.DAL.UserDAL.Put(User user) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\DAL\UserDAL.cs:line 36
   at WebApiProject.BLL.UserBLLService.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\UserBLLService.cs:line 97
2026-01-04 02:23:41.484 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 628.01ms
2026-01-04 02:23:41.493 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:23:41.502 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebApiProject.DAL.UserDAL.Put(User user) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\DAL\UserDAL.cs:line 36
   at WebApiProject.BLL.UserBLLService.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\UserBLLService.cs:line 97
   at WebApiProject.Controllers.UserController.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\UserController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 02:23:41.540 +02:00 [ERR] Error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Users' with unique index 'IX_Users_Email'. The duplicate key value is (a0548475081@gmail.com).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9cecb401-8225-4364-b1a1-4cb6b7ff97ee
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at WebApiProject.DAL.UserDAL.Put(User user) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\DAL\UserDAL.cs:line 36
   at WebApiProject.BLL.UserBLLService.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\UserBLLService.cs:line 97
   at WebApiProject.Controllers.UserController.Put(Int32 id, UserDTO userDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\UserController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 02:23:41.577 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/1 - 500 null application/json; charset=utf-8 750.5772ms
2026-01-04 02:37:51.056 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 02:37:51.487 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 02:37:51.495 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 02:37:51.599 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 02:37:51.605 +02:00 [INF] Hosting environment: Development
2026-01-04 02:37:51.609 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 02:37:52.413 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 02:37:53.047 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 639.5951ms
2026-01-04 02:37:53.048 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 02:37:53.048 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 02:37:53.173 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 126.3168ms
2026-01-04 02:37:53.278 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 230.89ms
2026-01-04 02:37:53.387 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 02:37:53.474 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.8495ms
2026-01-04 02:38:12.730 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 02:38:13.068 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:38:13.109 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:38:13.763 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:38:13.774 +02:00 [INF] Fetching all users
2026-01-04 02:38:16.271 +02:00 [INF] Executed DbCommand (176ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2026-01-04 02:38:16.467 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2691.8164ms.
2026-01-04 02:38:16.489 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.User, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 02:38:16.528 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 3404.1975ms
2026-01-04 02:38:16.536 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:38:16.557 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 200 null application/json; charset=utf-8 3827.9356ms
2026-01-04 02:39:34.375 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 02:39:34.412 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:39:34.418 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:39:34.458 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:39:34.463 +02:00 [INF] Fetching all users
2026-01-04 02:39:34.544 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2026-01-04 02:39:34.554 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.5495ms.
2026-01-04 02:39:34.561 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.User, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 02:39:34.566 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 143.181ms
2026-01-04 02:39:34.569 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:39:34.573 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 200 null application/json; charset=utf-8 200.5124ms
2026-01-04 02:39:49.208 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 50
2026-01-04 02:39:49.232 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 02:39:49.252 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 02:39:49.334 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 02:39:49.345 +02:00 [INF] Fetching user 9
2026-01-04 02:39:49.871 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:39:49.900 +02:00 [INF] Fetching gift 1
2026-01-04 02:39:50.207 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 02:39:50.358 +02:00 [INF] Adding shopping
2026-01-04 02:39:50.363 +02:00 [INF] Fetching gift 1
2026-01-04 02:39:50.376 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 02:39:50.389 +02:00 [WRN] Cannot buy a gift 1 that has already been raffled
2026-01-04 02:39:50.534 +02:00 [ERR] Error while adding shopping
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
2026-01-04 02:39:50.784 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 1523.6016ms
2026-01-04 02:39:50.790 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 02:39:50.802 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingCreateDTO createDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 86
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 02:39:50.825 +02:00 [ERR] Error occurred
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingCreateDTO createDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 86
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 02:39:50.847 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 500 null application/json; charset=utf-8 1640.1002ms
2026-01-04 02:40:05.691 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 50
2026-01-04 02:40:05.720 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 02:40:05.727 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 02:40:05.783 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 02:40:05.788 +02:00 [INF] Fetching user 9
2026-01-04 02:40:05.799 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:40:05.806 +02:00 [INF] Fetching gift 2
2026-01-04 02:40:05.812 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 02:40:05.819 +02:00 [INF] Adding shopping
2026-01-04 02:40:05.821 +02:00 [INF] Fetching gift 2
2026-01-04 02:40:05.829 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 02:40:05.837 +02:00 [WRN] Cannot buy a gift 2 that has already been raffled
2026-01-04 02:40:05.928 +02:00 [ERR] Error while adding shopping
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
2026-01-04 02:40:06.112 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 374.1325ms
2026-01-04 02:40:06.120 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 02:40:06.127 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingCreateDTO createDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 86
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 02:40:06.147 +02:00 [ERR] Error occurred
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingCreateDTO createDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 86
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 02:40:06.168 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 500 null application/json; charset=utf-8 477.5359ms
2026-01-04 02:41:34.121 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/User - application/json 196
2026-01-04 02:41:34.152 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:41:34.164 +02:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:41:34.189 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:41:34.205 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Post (WebApiProject) in 33.2453ms
2026-01-04 02:41:34.211 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:41:34.216 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/User - 400 null application/json; charset=utf-8 95.2115ms
2026-01-04 02:41:45.359 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/User - application/json 196
2026-01-04 02:41:45.373 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:41:45.377 +02:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:41:45.418 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 02:41:45.437 +02:00 [INF] Adding user with email user@example.com
2026-01-04 02:41:45.505 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-04 02:41:45.516 +02:00 [WRN] Email already exists: user@example.com
2026-01-04 02:41:45.898 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 476.4601ms.
2026-01-04 02:41:45.913 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-04 02:41:45.923 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Post (WebApiProject) in 539.0154ms
2026-01-04 02:41:45.930 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:41:45.937 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/User - 200 null text/plain; charset=utf-8 578.4123ms
2026-01-04 02:46:16.178 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 02:46:16.908 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 02:46:16.913 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 02:46:17.468 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 02:46:17.475 +02:00 [INF] Hosting environment: Development
2026-01-04 02:46:17.479 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 02:46:17.783 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 02:46:18.191 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 415.5796ms
2026-01-04 02:46:18.244 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 02:46:18.244 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 02:46:18.299 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 50.3052ms
2026-01-04 02:46:18.375 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 133.2954ms
2026-01-04 02:46:18.574 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 02:46:18.695 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 124.2431ms
2026-01-04 02:46:45.668 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 02:46:45.880 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Manager)
2026-01-04 02:46:45.899 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-04 02:46:45.929 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 401 null application/json; charset=utf-8 261.9036ms
2026-01-04 02:47:05.756 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 02:47:05.936 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:47:05.963 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:47:06.557 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:47:06.561 +02:00 [INF] Fetching all users
2026-01-04 02:47:08.348 +02:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2026-01-04 02:47:08.457 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1892.8952ms.
2026-01-04 02:47:08.474 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.User, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 02:47:08.508 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 2535.0972ms
2026-01-04 02:47:08.513 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:47:08.529 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 200 null application/json; charset=utf-8 2774.3192ms
2026-01-04 02:50:53.823 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/User - application/json 165
2026-01-04 02:50:53.845 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:50:53.871 +02:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:50:53.962 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:50:53.987 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Post (WebApiProject) in 109.5577ms
2026-01-04 02:50:53.995 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:50:54.000 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/User - 400 null application/json; charset=utf-8 176.9561ms
2026-01-04 02:51:03.709 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/User - application/json 166
2026-01-04 02:51:03.732 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:51:03.737 +02:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:51:03.797 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 02:51:03.819 +02:00 [INF] Adding user with email user@example.com
2026-01-04 02:51:04.207 +02:00 [INF] Executed DbCommand (93ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-04 02:51:04.232 +02:00 [WRN] Email already exists: user@example.com
2026-01-04 02:51:04.654 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 851.3926ms.
2026-01-04 02:51:04.660 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 02:51:04.663 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Post (WebApiProject) in 919.0468ms
2026-01-04 02:51:04.667 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:51:04.671 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/User - 400 null text/plain; charset=utf-8 962.0696ms
2026-01-04 02:51:58.889 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/User - application/json 164
2026-01-04 02:51:58.910 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:51:58.916 +02:00 [INF] Route matched with {action = "Post", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:51:58.925 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:51:58.930 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Post (WebApiProject) in 7.3146ms
2026-01-04 02:51:58.950 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Post (WebApiProject)'
2026-01-04 02:51:58.962 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/User - 400 null application/json; charset=utf-8 73.0614ms
2026-01-04 02:52:11.816 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User/99 - null null
2026-01-04 02:52:11.834 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:52:11.849 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:52:11.903 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 02:52:11.913 +02:00 [INF] Fetching user 99
2026-01-04 02:52:12.155 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:52:12.174 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 265.4937ms.
2026-01-04 02:52:12.186 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2026-01-04 02:52:12.192 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 331.756ms
2026-01-04 02:52:12.222 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 02:52:12.240 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User/99 - 404 null text/plain; charset=utf-8 425.3566ms
2026-01-04 02:53:25.936 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/444 - application/json 257
2026-01-04 02:53:25.960 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:53:25.972 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:53:25.982 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 02:53:25.986 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 5.9898ms
2026-01-04 02:53:26.017 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:53:26.021 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/444 - 400 null application/json; charset=utf-8 85.3459ms
2026-01-04 02:53:50.660 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/User/444 - application/json 257
2026-01-04 02:53:50.690 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:53:50.694 +02:00 [INF] Route matched with {action = "Put", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.UserDTO) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:53:50.752 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Put (WebApiProject) - Validation state: "Valid"
2026-01-04 02:53:50.764 +02:00 [INF] Updating user 444
2026-01-04 02:53:50.811 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:53:50.823 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Put (WebApiProject), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 63.9401ms.
2026-01-04 02:53:50.829 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2026-01-04 02:53:50.836 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Put (WebApiProject) in 134.3921ms
2026-01-04 02:53:50.844 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Put (WebApiProject)'
2026-01-04 02:53:50.854 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/User/444 - 404 null text/plain; charset=utf-8 197.1765ms
2026-01-04 02:54:30.835 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7164/api/User/888 - null null
2026-01-04 02:54:30.878 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Delete (WebApiProject)'
2026-01-04 02:54:30.889 +02:00 [INF] Route matched with {action = "Delete", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 02:54:30.928 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Delete (WebApiProject) - Validation state: "Valid"
2026-01-04 02:54:30.935 +02:00 [INF] Deleting user 888
2026-01-04 02:54:30.944 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 02:54:30.952 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Delete (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 18.9072ms.
2026-01-04 02:54:30.958 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 02:54:30.963 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Delete (WebApiProject) in 65.0527ms
2026-01-04 02:54:30.972 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Delete (WebApiProject)'
2026-01-04 02:54:30.983 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7164/api/User/888 - 400 null text/plain; charset=utf-8 149.9029ms
2026-01-04 02:54:45.713 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 02:54:45.838 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 124.9792ms
2026-01-04 02:54:45.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 02:54:45.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 02:54:45.940 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 88.7639ms
2026-01-04 02:54:46.005 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 154.5227ms
2026-01-04 02:54:46.099 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 02:54:46.119 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/favicon-32x32.png - null null
2026-01-04 02:54:46.157 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.6918ms
2026-01-04 02:54:46.169 +02:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2026-01-04 02:54:46.185 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/favicon-32x32.png - 200 628 image/png 67.0353ms
2026-01-04 03:02:57.715 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 03:02:59.008 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 03:02:59.015 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 03:02:59.288 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 03:02:59.297 +02:00 [INF] Hosting environment: Development
2026-01-04 03:02:59.309 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 03:03:01.205 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 03:03:03.333 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 2168.1328ms
2026-01-04 03:03:03.369 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 03:03:03.370 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 03:03:03.473 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 107.0819ms
2026-01-04 03:03:03.849 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 480.4588ms
2026-01-04 03:03:04.011 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 03:03:04.222 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 214.0528ms
2026-01-04 03:03:19.822 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Shopping - null null
2026-01-04 03:03:20.088 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Manager)
2026-01-04 03:03:20.116 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-04 03:03:20.121 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Shopping - 401 null application/json; charset=utf-8 301.4209ms
2026-01-04 03:04:05.315 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 44
2026-01-04 03:04:05.355 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2026-01-04 03:04:05.411 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2026-01-04 03:04:06.140 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2026-01-04 03:04:06.165 +02:00 [INF] Validating user login for a@a
2026-01-04 03:04:08.763 +02:00 [INF] Executed DbCommand (195ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2026-01-04 03:04:08.843 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 2692.0973ms.
2026-01-04 03:04:08.863 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2026-01-04 03:04:08.879 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 3451.2986ms
2026-01-04 03:04:08.905 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2026-01-04 03:04:08.930 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 401 null text/plain; charset=utf-8 3622.7071ms
2026-01-04 03:04:27.200 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2026-01-04 03:04:27.232 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2026-01-04 03:04:27.238 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2026-01-04 03:04:27.297 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2026-01-04 03:04:27.303 +02:00 [INF] Validating user login for r@r
2026-01-04 03:04:27.385 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2026-01-04 03:04:28.418 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1115.1011ms.
2026-01-04 03:04:28.428 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 03:04:28.443 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 1196.557ms
2026-01-04 03:04:28.455 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2026-01-04 03:04:28.463 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 1263.3214ms
2026-01-04 03:04:50.245 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Shopping - null null
2026-01-04 03:04:50.354 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2026-01-04 03:04:50.367 +02:00 [INF] Route matched with {action = "Get", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:04:50.462 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 03:04:50.476 +02:00 [INF] Fetching all confirmed shoppings
2026-01-04 03:04:50.927 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
2026-01-04 03:04:51.038 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 569.1396ms.
2026-01-04 03:04:51.044 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.ShoppingDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 03:04:51.055 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Get (WebApiProject) in 678.5638ms
2026-01-04 03:04:51.087 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2026-01-04 03:04:51.094 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Shopping - 200 null application/json; charset=utf-8 850.1691ms
2026-01-04 03:05:47.027 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 03:05:47.051 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 03:05:47.063 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 03:05:47.104 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 03:05:47.114 +02:00 [INF] Fetching all users
2026-01-04 03:05:47.153 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2026-01-04 03:05:47.161 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 50.4994ms.
2026-01-04 03:05:47.167 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.User, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 03:05:47.190 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 117.4459ms
2026-01-04 03:05:47.217 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 03:05:47.224 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 200 null application/json; charset=utf-8 210.6247ms
2026-01-04 03:06:22.282 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 49
2026-01-04 03:06:22.327 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 03:06:22.341 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:06:22.407 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 03:06:22.416 +02:00 [INF] Fetching user 5
2026-01-04 03:06:22.436 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 03:06:22.443 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 30.7065ms.
2026-01-04 03:06:22.449 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2026-01-04 03:06:22.453 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 102.0129ms
2026-01-04 03:06:22.457 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 03:06:22.460 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 404 null text/plain; charset=utf-8 179.8863ms
2026-01-04 03:06:31.035 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 49
2026-01-04 03:06:31.045 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 03:06:31.048 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:06:31.104 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 03:06:31.108 +02:00 [INF] Fetching user 4
2026-01-04 03:06:31.118 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 03:06:31.131 +02:00 [INF] Fetching gift 5
2026-01-04 03:06:31.295 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:06:31.366 +02:00 [INF] Adding shopping
2026-01-04 03:06:31.372 +02:00 [INF] Fetching gift 5
2026-01-04 03:06:31.381 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:06:31.398 +02:00 [WRN] Cannot buy a gift 5 that has already been raffled
2026-01-04 03:06:31.584 +02:00 [ERR] Error while adding shopping
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
2026-01-04 03:06:31.896 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 788.2769ms.
2026-01-04 03:06:31.906 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 03:06:31.915 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 854.5158ms
2026-01-04 03:06:31.926 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 03:06:31.931 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 400 null text/plain; charset=utf-8 895.5472ms
2026-01-04 03:06:54.475 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 49
2026-01-04 03:06:54.512 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 03:06:54.518 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:06:54.574 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 03:06:54.579 +02:00 [INF] Fetching user 4
2026-01-04 03:06:54.602 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 03:06:54.610 +02:00 [INF] Fetching gift 4
2026-01-04 03:06:54.630 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:06:54.641 +02:00 [INF] Adding shopping
2026-01-04 03:06:54.645 +02:00 [INF] Fetching gift 4
2026-01-04 03:06:54.649 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:06:54.655 +02:00 [WRN] Cannot buy a gift 4 that has already been raffled
2026-01-04 03:06:54.700 +02:00 [ERR] Error while adding shopping
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
2026-01-04 03:06:54.862 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 283.1679ms.
2026-01-04 03:06:54.870 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 03:06:54.876 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 345.9281ms
2026-01-04 03:06:54.880 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 03:06:54.885 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 400 null text/plain; charset=utf-8 410.8501ms
2026-01-04 03:25:39.762 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 03:25:40.224 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 03:25:40.229 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 03:25:40.299 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 03:25:40.332 +02:00 [INF] Hosting environment: Development
2026-01-04 03:25:40.336 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 03:25:41.108 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 03:25:41.659 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 558.3451ms
2026-01-04 03:25:41.660 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 03:25:41.660 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 03:25:41.715 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 54.9624ms
2026-01-04 03:25:41.885 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 225.3358ms
2026-01-04 03:25:41.991 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 03:25:42.058 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 68.8332ms
2026-01-04 03:26:12.162 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/User - null null
2026-01-04 03:26:12.578 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 03:26:12.625 +02:00 [INF] Route matched with {action = "Get", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.UserController (WebApiProject).
2026-01-04 03:26:13.374 +02:00 [INF] Executing action method WebApiProject.Controllers.UserController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 03:26:13.386 +02:00 [INF] Fetching all users
2026-01-04 03:26:15.315 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
2026-01-04 03:26:15.476 +02:00 [INF] Executed action method WebApiProject.Controllers.UserController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2092.6462ms.
2026-01-04 03:26:15.485 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.User, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 03:26:15.506 +02:00 [INF] Executed action WebApiProject.Controllers.UserController.Get (WebApiProject) in 2869.8042ms
2026-01-04 03:26:15.510 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.UserController.Get (WebApiProject)'
2026-01-04 03:26:15.522 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/User - 200 null application/json; charset=utf-8 3392.122ms
2026-01-04 03:26:43.723 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift - null null
2026-01-04 03:26:43.782 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-04 03:26:43.802 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:26:43.888 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 03:26:43.901 +02:00 [INF] Fetching all gifts
2026-01-04 03:26:44.397 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-04 03:26:44.530 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 633.967ms.
2026-01-04 03:26:44.539 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.GiftDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 03:26:44.547 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 730.7938ms
2026-01-04 03:26:44.552 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-04 03:26:44.555 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift - 200 null application/json; charset=utf-8 837.6383ms
2026-01-04 03:27:24.335 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 138
2026-01-04 03:27:24.356 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-04 03:27:24.380 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:27:24.511 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 03:27:24.527 +02:00 [INF] Fetching donor with id 1
2026-01-04 03:27:25.043 +02:00 [INF] Executed DbCommand (84ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[Name], [t].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM (
    SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
    FROM [Donors] AS [d]
    WHERE [d].[Id] = @__id_0
) AS [t]
LEFT JOIN [Gifts] AS [g] ON [t].[Id] = [g].[DonorId]
ORDER BY [t].[Id]
2026-01-04 03:27:25.065 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 544.5769ms.
2026-01-04 03:27:25.072 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2026-01-04 03:27:25.078 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 689.0975ms
2026-01-04 03:27:25.084 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-04 03:27:25.088 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 404 null text/plain; charset=utf-8 762.5494ms
2026-01-04 03:27:37.674 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 130
2026-01-04 03:27:37.706 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-04 03:27:37.715 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:27:37.765 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 03:27:37.780 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 48.5645ms
2026-01-04 03:27:37.784 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-04 03:27:37.791 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 400 null application/json; charset=utf-8 116.6427ms
2026-01-04 03:28:45.814 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Donor - null null
2026-01-04 03:28:45.849 +02:00 [INF] Executing endpoint 'DonorController.Get (WebApiProject)'
2026-01-04 03:28:45.861 +02:00 [INF] Route matched with {action = "Get", controller = "Donor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller DonorController (WebApiProject).
2026-01-04 03:28:45.899 +02:00 [INF] Executing action method DonorController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 03:28:45.906 +02:00 [INF] Fetching all donors
2026-01-04 03:28:45.954 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Donors] AS [d]
LEFT JOIN [Gifts] AS [g] ON [d].[Id] = [g].[DonorId]
ORDER BY [d].[Id]
2026-01-04 03:28:45.974 +02:00 [INF] Executed action method DonorController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 70.0369ms.
2026-01-04 03:28:45.986 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.DonorDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 03:28:46.006 +02:00 [INF] Executed action DonorController.Get (WebApiProject) in 138.1377ms
2026-01-04 03:28:46.051 +02:00 [INF] Executed endpoint 'DonorController.Get (WebApiProject)'
2026-01-04 03:28:46.062 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Donor - 200 null application/json; charset=utf-8 248.2297ms
2026-01-04 03:29:04.542 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 139
2026-01-04 03:29:04.548 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-04 03:29:04.550 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:29:04.589 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 03:29:04.593 +02:00 [INF] Fetching donor with id 1
2026-01-04 03:29:04.621 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[Name], [t].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM (
    SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
    FROM [Donors] AS [d]
    WHERE [d].[Id] = @__id_0
) AS [t]
LEFT JOIN [Gifts] AS [g] ON [t].[Id] = [g].[DonorId]
ORDER BY [t].[Id]
2026-01-04 03:29:04.641 +02:00 [INF] Adding new gift
2026-01-04 03:29:05.000 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CardPrice], [Category], [DonorId], [Name])
OUTPUT INSERTED.[Id], INSERTED.[IsRaffled]
VALUES (@p0, @p1, @p2, @p3);
2026-01-04 03:29:05.103 +02:00 [INF] Gift added successfully
2026-01-04 03:29:05.109 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 515.6148ms.
2026-01-04 03:29:05.115 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-04 03:29:05.124 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 568.1475ms
2026-01-04 03:29:05.133 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-04 03:29:05.139 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 200 null text/plain; charset=utf-8 596.68ms
2026-01-04 03:29:11.344 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift - null null
2026-01-04 03:29:11.356 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-04 03:29:11.360 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:29:11.406 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 03:29:11.411 +02:00 [INF] Fetching all gifts
2026-01-04 03:29:11.424 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-04 03:29:11.433 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.9765ms.
2026-01-04 03:29:11.439 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.GiftDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 03:29:11.443 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 78.2535ms
2026-01-04 03:29:11.449 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-04 03:29:11.452 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift - 200 null application/json; charset=utf-8 108.2701ms
2026-01-04 03:30:26.702 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 50
2026-01-04 03:30:26.728 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 03:30:26.741 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:30:26.793 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-04 03:30:26.805 +02:00 [INF] Fetching user 9
2026-01-04 03:30:26.836 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-04 03:30:26.845 +02:00 [INF] Fetching gift 6
2026-01-04 03:30:26.914 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:30:26.933 +02:00 [INF] Adding shopping
2026-01-04 03:30:26.938 +02:00 [INF] Fetching gift 6
2026-01-04 03:30:26.946 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:30:26.997 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Shoppings] ([GiftId], [IsDraft], [Quantity], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2026-01-04 03:30:27.013 +02:00 [INF] Shopping added successfully
2026-01-04 03:30:27.017 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 218.1455ms.
2026-01-04 03:30:27.024 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-04 03:30:27.029 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 280.2843ms
2026-01-04 03:30:27.056 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-04 03:30:27.061 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 200 null text/plain; charset=utf-8 360.5167ms
2026-01-04 03:30:50.222 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/88/raffle - null 0
2026-01-04 03:30:50.267 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:30:50.280 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:30:50.325 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-04 03:30:50.391 +02:00 [INF] Executed DbCommand (44ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:30:50.404 +02:00 [WRN] Gift 88 not found
2026-01-04 03:30:50.410 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 76.0883ms.
2026-01-04 03:30:50.417 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 03:30:50.424 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 137.6978ms
2026-01-04 03:30:50.463 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:30:50.475 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/88/raffle - 400 null text/plain; charset=utf-8 253.2446ms
2026-01-04 03:31:00.540 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/6/raffle - null 0
2026-01-04 03:31:00.563 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:31:00.572 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:31:00.626 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-04 03:31:00.642 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:31:00.653 +02:00 [WRN] No confirm shoppings for gift 6
2026-01-04 03:31:00.658 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 25.7468ms.
2026-01-04 03:31:00.667 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 03:31:00.672 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 86.8473ms
2026-01-04 03:31:00.698 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:31:00.712 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/6/raffle - 400 null text/plain; charset=utf-8 172.1561ms
2026-01-04 03:31:14.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Shopping - null null
2026-01-04 03:31:14.221 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2026-01-04 03:31:14.237 +02:00 [INF] Route matched with {action = "Get", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:31:14.293 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 03:31:14.301 +02:00 [INF] Fetching all confirmed shoppings
2026-01-04 03:31:14.336 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
2026-01-04 03:31:14.357 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.7722ms.
2026-01-04 03:31:14.368 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.ShoppingDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 03:31:14.379 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Get (WebApiProject) in 123.9464ms
2026-01-04 03:31:14.389 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2026-01-04 03:31:14.396 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Shopping - 200 null application/json; charset=utf-8 194.9425ms
2026-01-04 03:32:51.985 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping/15/confirm - null 0
2026-01-04 03:32:52.024 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-04 03:32:52.041 +02:00 [INF] Route matched with {action = "ConfirmShopping", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmShopping(Int32) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:32:52.095 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) - Validation state: "Valid"
2026-01-04 03:32:52.134 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[Id] = @__id_0
2026-01-04 03:32:52.360 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 259.3678ms.
2026-01-04 03:32:52.370 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 03:32:52.376 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) in 323.4367ms
2026-01-04 03:32:52.412 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-04 03:32:52.417 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping/15/confirm - 400 null text/plain; charset=utf-8 436.5228ms
2026-01-04 03:33:00.381 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping/14/confirm - null 0
2026-01-04 03:33:00.405 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-04 03:33:00.413 +02:00 [INF] Route matched with {action = "ConfirmShopping", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmShopping(Int32) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:33:00.482 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) - Validation state: "Valid"
2026-01-04 03:33:00.513 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[Id] = @__id_0
2026-01-04 03:33:00.563 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Shoppings] SET [GiftId] = @p0, [IsDraft] = @p1, [Quantity] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2026-01-04 03:33:00.573 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 85.5601ms.
2026-01-04 03:33:00.578 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-04 03:33:00.582 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) in 155.9879ms
2026-01-04 03:33:00.586 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-04 03:33:00.589 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping/14/confirm - 200 null text/plain; charset=utf-8 208.6122ms
2026-01-04 03:33:06.556 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping/12/confirm - null 0
2026-01-04 03:33:06.566 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-04 03:33:06.568 +02:00 [INF] Route matched with {action = "ConfirmShopping", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmShopping(Int32) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:33:06.606 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) - Validation state: "Valid"
2026-01-04 03:33:06.636 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[Id] = @__id_0
2026-01-04 03:33:06.780 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 168.5356ms.
2026-01-04 03:33:06.787 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 03:33:06.792 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) in 218.7268ms
2026-01-04 03:33:06.795 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-04 03:33:06.798 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping/12/confirm - 400 null text/plain; charset=utf-8 242.6603ms
2026-01-04 03:33:23.861 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Shopping - null null
2026-01-04 03:33:23.880 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2026-01-04 03:33:23.884 +02:00 [INF] Route matched with {action = "Get", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-04 03:33:23.916 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject) - Validation state: "Valid"
2026-01-04 03:33:23.921 +02:00 [INF] Fetching all confirmed shoppings
2026-01-04 03:33:23.938 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
2026-01-04 03:33:23.954 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.2048ms.
2026-01-04 03:33:23.963 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.ShoppingDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-04 03:33:23.970 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Get (WebApiProject) in 83.4376ms
2026-01-04 03:33:23.978 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2026-01-04 03:33:23.982 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Shopping - 200 null application/json; charset=utf-8 121.6133ms
2026-01-04 03:33:59.487 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/14/raffle - null 0
2026-01-04 03:33:59.514 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:33:59.518 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:33:59.555 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-04 03:33:59.575 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:33:59.586 +02:00 [WRN] Gift 14 not found
2026-01-04 03:33:59.591 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 31.6469ms.
2026-01-04 03:33:59.603 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 03:33:59.613 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 89.3748ms
2026-01-04 03:33:59.645 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:33:59.649 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/14/raffle - 400 null text/plain; charset=utf-8 161.8556ms
2026-01-04 03:34:06.884 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/14/raffle - null 0
2026-01-04 03:34:06.898 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:34:06.906 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:34:06.983 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-04 03:34:07.010 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:34:07.020 +02:00 [WRN] Gift 14 not found
2026-01-04 03:34:07.024 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 37.5794ms.
2026-01-04 03:34:07.029 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-04 03:34:07.034 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 109.3583ms
2026-01-04 03:34:07.040 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:34:07.062 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/14/raffle - 400 null text/plain; charset=utf-8 177.0088ms
2026-01-04 03:34:19.444 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/6/raffle - null 0
2026-01-04 03:34:19.461 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:34:19.472 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-04 03:34:19.555 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-04 03:34:19.593 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-04 03:34:19.618 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-04 03:34:25.043 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5483.5604ms.
2026-01-04 03:34:25.049 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleResultDTO'.
2026-01-04 03:34:25.057 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 5573.7836ms
2026-01-04 03:34:25.061 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-04 03:34:25.066 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/6/raffle - 200 null application/json; charset=utf-8 5622.6524ms
2026-01-04 04:14:00.960 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 04:14:01.584 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 04:14:01.588 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 04:14:01.699 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 04:14:01.705 +02:00 [INF] Hosting environment: Development
2026-01-04 04:14:01.709 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 04:14:02.517 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 04:14:02.864 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 354.3796ms
2026-01-04 04:14:02.918 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 04:14:02.918 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 04:14:02.978 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 60.1704ms
2026-01-04 04:14:03.045 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 128.4558ms
2026-01-04 04:14:03.188 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 04:14:03.254 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.668ms
2026-01-04 04:14:14.233 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:14:14.441 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 04:14:14.471 +02:00 [INF] Route matched with {action = "GetRaffleWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRaffleWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 04:14:14.490 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) in 5.8576ms
2026-01-04 04:14:14.496 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 04:14:14.506 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'WebApiProject.BLL.RafflePdfBLLService' while attempting to activate 'WebApiProject.Controllers.RafflePdfController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 04:14:14.579 +02:00 [ERR] Error occurred
System.InvalidOperationException: Unable to resolve service for type 'WebApiProject.BLL.RafflePdfBLLService' while attempting to activate 'WebApiProject.Controllers.RafflePdfController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 04:14:14.604 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 400 null application/json; charset=utf-8 370.9456ms
2026-01-04 04:15:18.953 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 04:15:19.404 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 04:15:19.409 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 04:15:19.541 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 04:15:19.546 +02:00 [INF] Hosting environment: Development
2026-01-04 04:15:19.552 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 04:15:20.950 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 04:15:21.484 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 543.5134ms
2026-01-04 04:15:21.502 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 04:15:21.502 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 04:15:21.570 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 67.0443ms
2026-01-04 04:15:21.653 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 151.2233ms
2026-01-04 04:15:21.713 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 04:15:21.792 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 79.3393ms
2026-01-04 04:15:32.083 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:15:32.266 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 04:15:32.297 +02:00 [INF] Route matched with {action = "GetRaffleWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRaffleWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 04:15:32.813 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 04:15:35.705 +02:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [t].[Id], [t].[GiftId], [t].[IsDraft], [t].[Quantity], [t].[UserId], [t].[Id0], [t].[Email], [t].[PasswordHash], [t].[Phone], [t].[Role], [t].[UserName]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t] ON [g].[Id] = [t].[GiftId]
WHERE [g].[IsRaffled] = CAST(1 AS bit)
ORDER BY [g].[Id], [d].[Id], [t].[Id]
2026-01-04 04:15:36.335 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) in 4022.4955ms
2026-01-04 04:15:36.342 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 04:15:36.358 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: 



Welcome to QuestPDF! 👋 

QuestPDF is an open-source library committed to long-term sustainability and continuous improvement. 

To maintain high-quality development and support while keeping the library free for most users, we use a fair pricing model where only larger organizations help by providing necessary funding for the project. 

If your organization’s annual gross revenue exceeds $1M USD, a Commercial License is required for production use (you can freely evaluate and test QuestPDF in non-production environments at no cost). In that case, please share this information with your team or management. By purchasing a license, you directly contribute to the ongoing development and reliability of QuestPDF. 

For details on the license types and determining which applies to you, please visit: https://www.questpdf.com/license/ 

We trust our users. To continue, no license key is needed. Instead, simply select and configure the appropriate license in your code. For example, if you qualify for the Community license, add: 

> QuestPDF.Settings.License = LicenseType.Community; 

Thank you for supporting QuestPDF! ❤️ By choosing the right license, you help ensure that our project remains transparent, sustainable, and continuously improving for everyone. 🚀 




   at QuestPDF.Drawing.DocumentGenerator.ValidateLicense()
   at QuestPDF.Drawing.DocumentGenerator.GeneratePdf(SkWriteStream stream, IDocument document)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document, Stream stream)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document)
   at WebApiProject.BLL.RafflePdfBLLService.GenerateRafflePdfAsync() in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\RafflePdfBLLService.cs:line 120
   at WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf() in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\RaffleController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 04:15:36.454 +02:00 [ERR] Error occurred
System.Exception: 



Welcome to QuestPDF! 👋 

QuestPDF is an open-source library committed to long-term sustainability and continuous improvement. 

To maintain high-quality development and support while keeping the library free for most users, we use a fair pricing model where only larger organizations help by providing necessary funding for the project. 

If your organization’s annual gross revenue exceeds $1M USD, a Commercial License is required for production use (you can freely evaluate and test QuestPDF in non-production environments at no cost). In that case, please share this information with your team or management. By purchasing a license, you directly contribute to the ongoing development and reliability of QuestPDF. 

For details on the license types and determining which applies to you, please visit: https://www.questpdf.com/license/ 

We trust our users. To continue, no license key is needed. Instead, simply select and configure the appropriate license in your code. For example, if you qualify for the Community license, add: 

> QuestPDF.Settings.License = LicenseType.Community; 

Thank you for supporting QuestPDF! ❤️ By choosing the right license, you help ensure that our project remains transparent, sustainable, and continuously improving for everyone. 🚀 




   at QuestPDF.Drawing.DocumentGenerator.ValidateLicense()
   at QuestPDF.Drawing.DocumentGenerator.GeneratePdf(SkWriteStream stream, IDocument document)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document, Stream stream)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document)
   at WebApiProject.BLL.RafflePdfBLLService.GenerateRafflePdfAsync() in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\RafflePdfBLLService.cs:line 120
   at WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf() in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\RaffleController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-04 04:15:36.509 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 500 null application/json; charset=utf-8 4426.1945ms
2026-01-04 04:19:35.007 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 04:19:35.394 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 04:19:35.398 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 04:19:35.504 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 04:19:35.508 +02:00 [INF] Hosting environment: Development
2026-01-04 04:19:35.511 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 04:19:37.652 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 04:19:38.157 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 04:19:38.157 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 04:19:38.159 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 517.4184ms
2026-01-04 04:19:38.203 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 45.4986ms
2026-01-04 04:19:38.303 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 146.9743ms
2026-01-04 04:19:38.361 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 04:19:38.430 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.9122ms
2026-01-04 04:19:44.496 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:19:44.752 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 04:19:44.805 +02:00 [INF] Route matched with {action = "GetWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 04:19:45.410 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 04:19:47.998 +02:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-04 04:19:48.386 +02:00 [ERR] Error generating raffle winners PDF
System.Exception: 



Welcome to QuestPDF! 👋 

QuestPDF is an open-source library committed to long-term sustainability and continuous improvement. 

To maintain high-quality development and support while keeping the library free for most users, we use a fair pricing model where only larger organizations help by providing necessary funding for the project. 

If your organization’s annual gross revenue exceeds $1M USD, a Commercial License is required for production use (you can freely evaluate and test QuestPDF in non-production environments at no cost). In that case, please share this information with your team or management. By purchasing a license, you directly contribute to the ongoing development and reliability of QuestPDF. 

For details on the license types and determining which applies to you, please visit: https://www.questpdf.com/license/ 

We trust our users. To continue, no license key is needed. Instead, simply select and configure the appropriate license in your code. For example, if you qualify for the Community license, add: 

> QuestPDF.Settings.License = LicenseType.Community; 

Thank you for supporting QuestPDF! ❤️ By choosing the right license, you help ensure that our project remains transparent, sustainable, and continuously improving for everyone. 🚀 




   at QuestPDF.Drawing.DocumentGenerator.ValidateLicense()
   at QuestPDF.Drawing.DocumentGenerator.GeneratePdf(SkWriteStream stream, IDocument document)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document, Stream stream)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document)
   at WebApiProject.BLL.RafflePdfBLLService.GenerateWinnersPdfAsync() in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\RafflePdfBLLService.cs:line 48
2026-01-04 04:19:48.593 +02:00 [ERR] Error generating raffle winners PDF
System.Exception: 



Welcome to QuestPDF! 👋 

QuestPDF is an open-source library committed to long-term sustainability and continuous improvement. 

To maintain high-quality development and support while keeping the library free for most users, we use a fair pricing model where only larger organizations help by providing necessary funding for the project. 

If your organization’s annual gross revenue exceeds $1M USD, a Commercial License is required for production use (you can freely evaluate and test QuestPDF in non-production environments at no cost). In that case, please share this information with your team or management. By purchasing a license, you directly contribute to the ongoing development and reliability of QuestPDF. 

For details on the license types and determining which applies to you, please visit: https://www.questpdf.com/license/ 

We trust our users. To continue, no license key is needed. Instead, simply select and configure the appropriate license in your code. For example, if you qualify for the Community license, add: 

> QuestPDF.Settings.License = LicenseType.Community; 

Thank you for supporting QuestPDF! ❤️ By choosing the right license, you help ensure that our project remains transparent, sustainable, and continuously improving for everyone. 🚀 




   at QuestPDF.Drawing.DocumentGenerator.ValidateLicense()
   at QuestPDF.Drawing.DocumentGenerator.GeneratePdf(SkWriteStream stream, IDocument document)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document, Stream stream)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document)
   at WebApiProject.BLL.RafflePdfBLLService.GenerateWinnersPdfAsync() in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\BLL\RafflePdfBLLService.cs:line 48
   at WebApiProject.Controllers.RafflePdfController.GetWinnersPdf() in C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject\Controllers\RaffleController.cs:line 24
2026-01-04 04:19:48.616 +02:00 [INF] Executed action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3193.4395ms.
2026-01-04 04:19:48.630 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 04:19:48.644 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) in 3825.1675ms
2026-01-04 04:19:48.647 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 04:19:48.658 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 500 null application/json; charset=utf-8 4163.8986ms
2026-01-04 04:21:04.786 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 04:21:05.157 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 04:21:05.160 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 04:21:05.310 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 04:21:05.316 +02:00 [INF] Hosting environment: Development
2026-01-04 04:21:05.322 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 04:21:06.921 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 04:21:07.332 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 04:21:07.332 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 04:21:07.347 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 434.4961ms
2026-01-04 04:21:07.422 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 87.2358ms
2026-01-04 04:21:07.526 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 195.1686ms
2026-01-04 04:21:07.605 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 04:21:07.701 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.0198ms
2026-01-04 04:21:14.639 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:21:14.959 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 04:21:14.980 +02:00 [INF] Route matched with {action = "GetWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 04:21:15.453 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 04:21:18.453 +02:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-04 04:21:19.761 +02:00 [INF] Executed action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 4297.2107ms.
2026-01-04 04:21:19.776 +02:00 [INF] Executing FileContentResult, sending file with download name 'RaffleWinners.pdf' ...
2026-01-04 04:21:19.811 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) in 4787.8457ms
2026-01-04 04:21:19.819 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 04:21:19.847 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 200 31635 application/pdf 5209.486ms
2026-01-04 04:25:19.337 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 04:25:19.740 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 04:25:19.743 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 04:25:19.847 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 04:25:19.855 +02:00 [INF] Hosting environment: Development
2026-01-04 04:25:19.869 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 04:25:20.833 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 04:25:21.288 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 462.4279ms
2026-01-04 04:25:21.298 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 04:25:21.298 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 04:25:21.386 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 88.9029ms
2026-01-04 04:25:21.467 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 170.7851ms
2026-01-04 04:25:21.566 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 04:25:21.672 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 108.5396ms
2026-01-04 04:25:27.856 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:25:28.051 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 04:25:28.069 +02:00 [INF] Route matched with {action = "GetRaffleWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRaffleWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 04:25:28.419 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 04:25:28.431 +02:00 [INF] Generating raffle winners PDF...
2026-01-04 04:25:31.121 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
WHERE [g].[IsRaffled] = CAST(1 AS bit)
ORDER BY [g].[Id], [d].[Id]
2026-01-04 04:25:59.810 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 04:26:00.354 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 04:26:00.360 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 04:26:00.510 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 04:26:00.516 +02:00 [INF] Hosting environment: Development
2026-01-04 04:26:00.522 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 04:26:03.958 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 04:26:04.682 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 728.6976ms
2026-01-04 04:26:04.721 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 04:26:04.721 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 04:26:04.746 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 25.3012ms
2026-01-04 04:26:04.882 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 160.0217ms
2026-01-04 04:26:04.917 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 04:26:04.969 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.7753ms
2026-01-04 04:26:12.479 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:26:12.632 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 04:26:12.652 +02:00 [INF] Route matched with {action = "GetRaffleWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetRaffleWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 04:26:12.997 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 04:26:13.008 +02:00 [INF] Generating raffle winners PDF...
2026-01-04 04:26:15.483 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
WHERE [g].[IsRaffled] = CAST(1 AS bit)
ORDER BY [g].[Id], [d].[Id]
2026-01-04 04:30:24.731 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 04:30:25.287 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 04:30:25.293 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 04:30:25.452 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 04:30:25.457 +02:00 [INF] Hosting environment: Development
2026-01-04 04:30:25.462 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 04:30:26.697 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 04:30:27.187 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 496.3797ms
2026-01-04 04:30:27.197 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 04:30:27.197 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 04:30:27.244 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 48.1406ms
2026-01-04 04:30:27.392 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 196.3676ms
2026-01-04 04:30:27.500 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 04:30:27.615 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 118.821ms
2026-01-04 04:30:34.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:30:35.008 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Manager)
2026-01-04 04:30:35.028 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-04 04:30:35.031 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 401 null application/json; charset=utf-8 246.0464ms
2026-01-04 04:30:56.257 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2026-01-04 04:30:56.321 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2026-01-04 04:30:56.380 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2026-01-04 04:30:57.067 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2026-01-04 04:30:57.082 +02:00 [INF] Validating user login for r@r
2026-01-04 04:30:59.028 +02:00 [INF] Executed DbCommand (156ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2026-01-04 04:31:00.220 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3144.4878ms.
2026-01-04 04:31:00.240 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-04 04:31:00.254 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 3856.8087ms
2026-01-04 04:31:00.259 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2026-01-04 04:31:00.278 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 4021.1393ms
2026-01-04 04:31:16.682 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:31:16.774 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 04:31:16.784 +02:00 [INF] Route matched with {action = "GetWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 04:31:16.827 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 04:31:17.099 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
WHERE [g].[IsRaffled] = CAST(1 AS bit)
ORDER BY [g].[Id], [d].[Id]
2026-01-04 04:31:17.945 +02:00 [INF] Executed action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 1113.8502ms.
2026-01-04 04:31:17.952 +02:00 [INF] Executing FileContentResult, sending file with download name 'RaffleWinners_20260104_0431.pdf' ...
2026-01-04 04:31:17.975 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) in 1183.8061ms
2026-01-04 04:31:17.987 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 04:31:17.995 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 200 41243 application/pdf 1313.7736ms
2026-01-04 04:40:41.181 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 04:40:41.713 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 04:40:41.716 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 04:40:41.881 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 04:40:41.889 +02:00 [INF] Hosting environment: Development
2026-01-04 04:40:41.894 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 04:40:42.379 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 04:40:42.719 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 04:40:42.719 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 04:40:42.719 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 346.4863ms
2026-01-04 04:40:42.826 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 106.7945ms
2026-01-04 04:40:42.911 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 192.1371ms
2026-01-04 04:40:43.046 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 04:40:43.113 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 66.3747ms
2026-01-04 04:40:49.528 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:40:49.712 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Manager)
2026-01-04 04:40:49.731 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-04 04:40:49.738 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 401 null application/json; charset=utf-8 212.3248ms
2026-01-04 04:41:09.566 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 04:41:09.700 +02:00 [INF] Executing endpoint 'RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 04:41:09.721 +02:00 [INF] Route matched with {action = "GetWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetWinnersPdf() on controller RafflePdfController (WebApiProject).
2026-01-04 04:41:10.099 +02:00 [INF] Executing action method RafflePdfController.GetWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 04:41:12.582 +02:00 [ERR] Failed executing DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [g].[WinnerUserId], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [u].[Id], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Users] AS [u] ON [g].[WinnerUserId] = [u].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
WHERE [g].[IsRaffled] = CAST(1 AS bit) AND [g].[WinnerUserId] IS NOT NULL
ORDER BY [g].[Id], [d].[Id], [u].[Id]
2026-01-04 04:41:12.650 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'WinnerUserId'.
Invalid column name 'WinnerUserId'.
Invalid column name 'WinnerUserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:c81dc7c1-324d-4a76-bc92-2c4874e7ad18
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'WinnerUserId'.
Invalid column name 'WinnerUserId'.
Invalid column name 'WinnerUserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:c81dc7c1-324d-4a76-bc92-2c4874e7ad18
Error Number:207,State:1,Class:16
2026-01-04 04:41:12.772 +02:00 [INF] Executed action method RafflePdfController.GetWinnersPdf (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2661.188ms.
2026-01-04 04:41:12.793 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-04 04:41:12.804 +02:00 [INF] Executed action RafflePdfController.GetWinnersPdf (WebApiProject) in 3073.1395ms
2026-01-04 04:41:12.809 +02:00 [INF] Executed endpoint 'RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 04:41:12.827 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 200 null text/plain; charset=utf-8 3261.4702ms
2026-01-04 05:09:23.292 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 05:09:23.821 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 05:09:23.826 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 05:09:23.923 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 05:09:23.930 +02:00 [INF] Hosting environment: Development
2026-01-04 05:09:23.937 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 05:09:24.765 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 05:09:25.297 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 544.2085ms
2026-01-04 05:09:25.310 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 05:09:25.310 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 05:09:25.359 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 50.0921ms
2026-01-04 05:09:25.490 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 180.6675ms
2026-01-04 05:09:25.529 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 05:09:25.566 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.7291ms
2026-01-04 05:09:31.002 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 05:09:31.227 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 05:09:31.260 +02:00 [INF] Route matched with {action = "GetWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 05:09:31.665 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 05:09:34.297 +02:00 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-04 05:09:35.129 +02:00 [INF] Executed action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 3449.7501ms.
2026-01-04 05:09:35.143 +02:00 [INF] Executing FileContentResult, sending file with download name 'RaffleWinners.pdf' ...
2026-01-04 05:09:35.181 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) in 3910.7206ms
2026-01-04 05:09:35.185 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 05:09:35.203 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 200 41574 application/pdf 4202.1302ms
2026-01-04 05:14:40.835 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-04 05:14:40.876 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-04 05:14:40.879 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-01-04 05:14:40.880 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-01-04 05:14:40.895 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-01-04 05:14:40.907 +02:00 [INF] Applying migration '20260104031423_AddRaffleWinners'.
2026-01-04 05:14:40.974 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RaffleWinners] (
    [Id] int NOT NULL IDENTITY,
    [GiftId] int NOT NULL,
    [UserId] int NOT NULL,
    [RaffleDate] datetime2 NOT NULL,
    CONSTRAINT [PK_RaffleWinners] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RaffleWinners_Gifts_GiftId] FOREIGN KEY ([GiftId]) REFERENCES [Gifts] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RaffleWinners_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2026-01-04 05:14:40.985 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RaffleWinners_GiftId] ON [RaffleWinners] ([GiftId]);
2026-01-04 05:14:40.988 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RaffleWinners_UserId] ON [RaffleWinners] ([UserId]);
2026-01-04 05:14:40.993 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20260104031423_AddRaffleWinners', N'8.0.0');
2026-01-04 05:14:47.519 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 05:14:47.968 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 05:14:47.974 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 05:14:48.092 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 05:14:48.097 +02:00 [INF] Hosting environment: Development
2026-01-04 05:14:48.102 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 05:14:50.727 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 05:14:51.122 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 05:14:51.122 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 05:14:51.122 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 403.5735ms
2026-01-04 05:14:51.137 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 16.7542ms
2026-01-04 05:14:51.212 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.9379ms
2026-01-04 05:14:51.260 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 05:14:51.379 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 119.3375ms
2026-01-04 05:14:57.633 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 05:14:57.847 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 05:14:57.898 +02:00 [INF] Route matched with {action = "GetWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 05:14:58.269 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 05:15:00.686 +02:00 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-04 05:15:01.337 +02:00 [INF] Executed action method WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 3055.6716ms.
2026-01-04 05:15:01.344 +02:00 [INF] Executing FileContentResult, sending file with download name 'RaffleWinners.pdf' ...
2026-01-04 05:15:01.374 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject) in 3458.8952ms
2026-01-04 05:15:01.381 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetWinnersPdf (WebApiProject)'
2026-01-04 05:15:01.395 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 200 41246 application/pdf 3762.1882ms
2026-01-04 05:30:29.069 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 05:30:29.718 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 05:30:29.721 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 05:30:29.892 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 05:30:29.900 +02:00 [INF] Hosting environment: Development
2026-01-04 05:30:29.906 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 05:30:33.532 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 05:30:34.073 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 558.0338ms
2026-01-04 05:30:34.076 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 05:30:34.076 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 05:30:34.096 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 20.2378ms
2026-01-04 05:30:34.152 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.534ms
2026-01-04 05:30:34.182 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 05:30:34.233 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 50.973ms
2026-01-04 05:30:40.057 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 05:30:40.239 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 05:30:40.280 +02:00 [INF] Route matched with {action = "GetRaffleWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRaffleWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 05:30:40.822 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 05:30:44.003 +02:00 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [t].[Id], [t].[GiftId], [t].[IsDraft], [t].[Quantity], [t].[UserId], [t].[Id0], [t].[Email], [t].[PasswordHash], [t].[Phone], [t].[Role], [t].[UserName]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t] ON [g].[Id] = [t].[GiftId]
WHERE [g].[IsRaffled] = CAST(1 AS bit)
ORDER BY [g].[Id], [d].[Id], [t].[Id]
2026-01-04 05:30:44.840 +02:00 [INF] Executed action method WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 4004.378ms.
2026-01-04 05:30:44.853 +02:00 [INF] Executing FileContentResult, sending file with download name 'RaffleWinners_20260104_0530.pdf' ...
2026-01-04 05:30:44.893 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) in 4596.2784ms
2026-01-04 05:30:44.900 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 05:30:44.922 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 200 46106 application/pdf 4867.3211ms
2026-01-04 05:31:57.327 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 05:31:59.668 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 05:32:01.462 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 05:32:03.275 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 05:32:03.699 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 05:32:03.723 +02:00 [INF] Hosting environment: Development
2026-01-04 05:32:03.735 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 05:32:04.775 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 1544.1982ms
2026-01-04 05:32:04.935 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 05:32:04.939 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 05:32:04.994 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 59.1006ms
2026-01-04 05:32:05.270 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 333.8871ms
2026-01-04 05:32:05.542 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 05:32:05.655 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 114.9594ms
2026-01-04 05:32:24.272 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-04 05:32:24.785 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-04 05:32:24.789 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-04 05:32:24.982 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-04 05:32:24.987 +02:00 [INF] Hosting environment: Development
2026-01-04 05:32:24.993 +02:00 [INF] Content root path: C:\Users\user1\Desktop\מעודכן\WebApiProject\WebApiProject
2026-01-04 05:32:25.495 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-04 05:32:26.090 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-04 05:32:26.092 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-04 05:32:26.095 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 609.808ms
2026-01-04 05:32:26.131 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 37.9583ms
2026-01-04 05:32:26.192 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 102.4457ms
2026-01-04 05:32:26.249 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-04 05:32:26.369 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.4609ms
2026-01-04 05:32:32.546 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - null null
2026-01-04 05:32:32.686 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 05:32:32.718 +02:00 [INF] Route matched with {action = "GetRaffleWinnersPdf", controller = "RafflePdf"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRaffleWinnersPdf() on controller WebApiProject.Controllers.RafflePdfController (WebApiProject).
2026-01-04 05:32:33.158 +02:00 [INF] Executing action method WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) - Validation state: "Valid"
2026-01-04 05:32:35.426 +02:00 [INF] Executed DbCommand (138ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [t].[Id], [t].[GiftId], [t].[IsDraft], [t].[Quantity], [t].[UserId], [t].[Id0], [t].[Email], [t].[PasswordHash], [t].[Phone], [t].[Role], [t].[UserName]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t] ON [g].[Id] = [t].[GiftId]
WHERE [g].[IsRaffled] = CAST(1 AS bit)
ORDER BY [g].[Id], [d].[Id], [t].[Id]
2026-01-04 05:32:36.324 +02:00 [INF] Executed action method WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 3155.1332ms.
2026-01-04 05:32:36.337 +02:00 [INF] Executing FileContentResult, sending file with download name 'RaffleWinners_20260104_0532.pdf' ...
2026-01-04 05:32:36.372 +02:00 [INF] Executed action WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject) in 3639.994ms
2026-01-04 05:32:36.382 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.RafflePdfController.GetRaffleWinnersPdf (WebApiProject)'
2026-01-04 05:32:36.405 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/RafflePdf/winners - 200 46104 application/pdf 3858.523ms
