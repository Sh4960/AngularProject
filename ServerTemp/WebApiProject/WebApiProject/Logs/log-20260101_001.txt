2026-01-01 00:37:08.402 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-01 00:37:08.841 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-01 00:37:08.854 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-01 00:37:09.024 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-01 00:37:09.027 +02:00 [INF] Hosting environment: Development
2026-01-01 00:37:09.030 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2026-01-01 00:37:21.949 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-01 00:37:22.697 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-01 00:37:22.703 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-01 00:37:22.861 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-01 00:37:22.869 +02:00 [INF] Hosting environment: Development
2026-01-01 00:37:22.875 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2026-01-01 00:37:23.878 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-01 00:37:24.584 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 720.0766ms
2026-01-01 00:37:24.627 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-01 00:37:24.653 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-01 00:37:24.661 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 34.3413ms
2026-01-01 00:37:24.897 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 245.3097ms
2026-01-01 00:37:25.244 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-01 00:37:25.332 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.9058ms
2026-01-01 00:38:29.248 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 100
2026-01-01 00:38:29.799 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-01 00:38:29.875 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:38:30.886 +02:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType8`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType7`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-01 00:38:30.936 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 1038.2285ms
2026-01-01 00:38:30.948 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-01 00:38:30.958 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 400 null application/json; charset=utf-8 1728.5979ms
2026-01-01 00:39:00.528 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 121
2026-01-01 00:39:00.625 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-01 00:39:00.630 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:39:00.865 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Post (WebApiProject) - Validation state: "Valid"
2026-01-01 00:39:00.883 +02:00 [INF] Fetching donor with id 1
2026-01-01 00:39:05.412 +02:00 [INF] Executed DbCommand (223ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[Name], [t].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM (
    SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
    FROM [Donors] AS [d]
    WHERE [d].[Id] = @__id_0
) AS [t]
LEFT JOIN [Gifts] AS [g] ON [t].[Id] = [g].[DonorId]
ORDER BY [t].[Id]
2026-01-01 00:39:05.770 +02:00 [INF] Adding new gift
2026-01-01 00:39:06.204 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CardPrice], [Category], [DonorId], [Name])
OUTPUT INSERTED.[Id], INSERTED.[IsRaffled]
VALUES (@p0, @p1, @p2, @p3);
2026-01-01 00:39:06.296 +02:00 [INF] Gift added successfully
2026-01-01 00:39:06.315 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5426.9926ms.
2026-01-01 00:39:06.327 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 00:39:06.337 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 5700.1729ms
2026-01-01 00:39:06.344 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-01 00:39:06.368 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 200 null text/plain; charset=utf-8 5841.9503ms
2026-01-01 00:40:33.876 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift - null null
2026-01-01 00:40:34.166 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-01 00:40:34.256 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:40:34.551 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Get (WebApiProject) - Validation state: "Valid"
2026-01-01 00:40:34.645 +02:00 [INF] Fetching all gifts
2026-01-01 00:40:34.963 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-01 00:40:35.139 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 501.1889ms.
2026-01-01 00:40:35.214 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.GiftDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-01 00:40:35.239 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 840.3382ms
2026-01-01 00:40:35.249 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-01 00:40:35.255 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift - 200 null application/json; charset=utf-8 1380.8787ms
2026-01-01 00:40:51.497 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift/4 - null null
2026-01-01 00:40:51.511 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-01 00:40:51.528 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:40:51.601 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Get (WebApiProject) - Validation state: "Valid"
2026-01-01 00:40:51.614 +02:00 [INF] Fetching gift 4
2026-01-01 00:40:51.944 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 00:40:51.965 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 355.9294ms.
2026-01-01 00:40:51.975 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.GiftDTO'.
2026-01-01 00:40:51.985 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 443.284ms
2026-01-01 00:40:51.997 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-01 00:40:52.007 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift/4 - 200 null application/json; charset=utf-8 511.7486ms
2026-01-01 00:41:57.075 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/2/raffle - null 0
2026-01-01 00:41:57.124 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 00:41:57.142 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:41:57.206 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-01 00:41:57.422 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 00:41:57.476 +02:00 [WRN] Gift 2 has already been raffled
2026-01-01 00:41:57.483 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 270.581ms.
2026-01-01 00:41:57.492 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-01 00:41:57.500 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 348.1276ms
2026-01-01 00:41:57.507 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 00:41:57.514 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/2/raffle - 400 null text/plain; charset=utf-8 438.7868ms
2026-01-01 00:42:02.627 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/4/raffle - null 0
2026-01-01 00:42:02.639 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 00:42:02.645 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:42:02.719 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-01 00:42:02.738 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 00:42:02.757 +02:00 [WRN] No confirm shoppings for gift 4
2026-01-01 00:42:02.764 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 38.7835ms.
2026-01-01 00:42:02.775 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-01 00:42:02.781 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 123.6465ms
2026-01-01 00:42:02.790 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 00:42:02.797 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/4/raffle - 400 null text/plain; charset=utf-8 169.6106ms
2026-01-01 00:42:27.293 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 50
2026-01-01 00:42:27.315 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-01 00:42:27.331 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-01 00:42:27.404 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-01 00:42:27.427 +02:00 [INF] Fetching user 1
2026-01-01 00:42:27.470 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-01 00:42:27.511 +02:00 [INF] Fetching gift 4
2026-01-01 00:42:27.523 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 00:42:27.547 +02:00 [INF] Adding shopping
2026-01-01 00:42:27.554 +02:00 [INF] Fetching gift 4
2026-01-01 00:42:27.569 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 00:42:27.650 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Shoppings] ([GiftId], [IsDraft], [Quantity], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2026-01-01 00:42:27.695 +02:00 [INF] Shopping added successfully
2026-01-01 00:42:27.700 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 290.3253ms.
2026-01-01 00:42:27.708 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 00:42:27.715 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 374.5991ms
2026-01-01 00:42:27.721 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-01 00:42:27.726 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 200 null text/plain; charset=utf-8 433.5713ms
2026-01-01 00:42:58.250 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping/12/confirm - null 0
2026-01-01 00:42:58.336 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-01 00:42:58.419 +02:00 [INF] Route matched with {action = "ConfirmShopping", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmShopping(Int32) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-01 00:42:58.490 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) - Validation state: "Valid"
2026-01-01 00:42:58.581 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[Id] = @__id_0
2026-01-01 00:42:58.643 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Shoppings] SET [GiftId] = @p0, [IsDraft] = @p1, [Quantity] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2026-01-01 00:42:58.699 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 204.7676ms.
2026-01-01 00:42:58.712 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 00:42:58.720 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) in 281.1733ms
2026-01-01 00:42:58.731 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-01 00:42:58.740 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping/12/confirm - 200 null text/plain; charset=utf-8 514.6432ms
2026-01-01 00:43:14.979 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/4/raffle - null 0
2026-01-01 00:43:14.994 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 00:43:15.000 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:43:15.062 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-01 00:43:15.115 +02:00 [INF] Executed DbCommand (41ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 00:43:15.151 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 00:43:15.163 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.698ms.
2026-01-01 00:43:15.171 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleResultDTO'.
2026-01-01 00:43:15.186 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 174.3205ms
2026-01-01 00:43:15.197 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 00:43:15.206 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/4/raffle - 200 null application/json; charset=utf-8 228.9652ms
2026-01-01 00:43:39.073 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - null 0
2026-01-01 00:43:39.112 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2026-01-01 00:43:39.129 +02:00 [INF] Route matched with {action = "RaffleAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleAll() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:43:39.193 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) - Validation state: "Valid"
2026-01-01 00:43:39.204 +02:00 [INF] Starting raffle for all gifts
2026-01-01 00:43:39.221 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-01 00:43:39.235 +02:00 [INF] Raffle completed successfully
2026-01-01 00:43:39.240 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 42.3298ms.
2026-01-01 00:43:39.250 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleReportDTO'.
2026-01-01 00:43:39.260 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) in 118.8919ms
2026-01-01 00:43:39.299 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2026-01-01 00:43:39.305 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - 200 null application/json; charset=utf-8 234.4352ms
2026-01-01 00:49:09.281 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-01 00:49:09.917 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-01 00:49:09.924 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-01 00:49:10.087 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-01 00:49:10.132 +02:00 [INF] Hosting environment: Development
2026-01-01 00:49:10.162 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2026-01-01 00:49:10.913 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-01 00:49:11.734 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 842.457ms
2026-01-01 00:49:11.740 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-01 00:49:11.740 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-01 00:49:11.865 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 125.8798ms
2026-01-01 00:49:11.958 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 219.1495ms
2026-01-01 00:49:12.047 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-01 00:49:12.156 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 110.8615ms
2026-01-01 00:52:54.572 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-01 00:52:55.244 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-01 00:52:55.251 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-01 00:52:55.439 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-01 00:52:55.443 +02:00 [INF] Hosting environment: Development
2026-01-01 00:52:55.452 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2026-01-01 00:52:56.086 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-01 00:52:56.929 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 859.8064ms
2026-01-01 00:52:56.941 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-01 00:52:56.941 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-01 00:52:56.988 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 47.2344ms
2026-01-01 00:52:57.106 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 166.2838ms
2026-01-01 00:52:57.172 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-01 00:52:57.277 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 105.7236ms
2026-01-01 00:55:54.992 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-01 00:55:55.726 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-01 00:55:55.731 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-01 00:55:55.925 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-01 00:55:55.930 +02:00 [INF] Hosting environment: Development
2026-01-01 00:55:55.938 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2026-01-01 00:55:57.238 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-01 00:55:58.431 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-01 00:55:58.431 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-01 00:55:58.433 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 1210.2065ms
2026-01-01 00:55:58.492 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 62.4484ms
2026-01-01 00:55:58.755 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 325.336ms
2026-01-01 00:55:58.865 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-01 00:55:59.074 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 213.1472ms
2026-01-01 00:58:27.005 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift/3 - null null
2026-01-01 00:58:27.268 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-01-01 00:58:27.302 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2026-01-01 00:58:27.307 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift/3 - 401 null application/json; charset=utf-8 301.7971ms
2026-01-01 00:58:47.546 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift/3 - null null
2026-01-01 00:58:47.778 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-01 00:58:47.847 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 00:58:48.926 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Get (WebApiProject) - Validation state: "Valid"
2026-01-01 00:58:48.945 +02:00 [INF] Fetching gift 3
2026-01-01 00:58:53.533 +02:00 [INF] Executed DbCommand (233ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 00:58:54.097 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5150.1511ms.
2026-01-01 00:58:54.130 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.GiftDTO'.
2026-01-01 00:58:54.203 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 6299.3768ms
2026-01-01 00:58:54.212 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2026-01-01 00:58:54.240 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift/3 - 200 null application/json; charset=utf-8 6694.3503ms
2026-01-01 01:23:01.132 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-01 01:23:03.090 +02:00 [INF] Now listening on: https://localhost:7164
2026-01-01 01:23:03.169 +02:00 [INF] Now listening on: http://localhost:5205
2026-01-01 01:23:03.584 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-01 01:23:03.699 +02:00 [INF] Hosting environment: Development
2026-01-01 01:23:03.814 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2026-01-01 01:23:05.973 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2026-01-01 01:23:08.547 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2026-01-01 01:23:08.547 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2026-01-01 01:23:08.564 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 2621.4117ms
2026-01-01 01:23:10.665 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 2115.6365ms
2026-01-01 01:23:10.237 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 1686.5801ms
2026-01-01 01:23:10.735 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2026-01-01 01:23:11.795 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1061.5077ms
2026-01-01 01:23:39.382 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - null 0
2026-01-01 01:23:39.922 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2026-01-01 01:23:39.972 +02:00 [INF] Route matched with {action = "RaffleAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleAll() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 01:23:41.083 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) - Validation state: "Valid"
2026-01-01 01:23:41.110 +02:00 [INF] Starting raffle for all gifts
2026-01-01 01:23:45.756 +02:00 [INF] Executed DbCommand (177ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-01 01:23:46.384 +02:00 [INF] Executed DbCommand (116ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[GiftId] = @__id_0 AND [s].[IsDraft] = CAST(0 AS bit)
2026-01-01 01:23:46.937 +02:00 [INF] Executed DbCommand (56ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:23:47.042 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[GiftId] = @__id_0 AND [s].[IsDraft] = CAST(0 AS bit)
2026-01-01 01:23:47.066 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:23:47.086 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[GiftId] = @__id_0 AND [s].[IsDraft] = CAST(0 AS bit)
2026-01-01 01:23:47.107 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:23:47.127 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[GiftId] = @__id_0 AND [s].[IsDraft] = CAST(0 AS bit)
2026-01-01 01:23:47.146 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:23:47.160 +02:00 [INF] Raffle completed successfully
2026-01-01 01:23:47.180 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 6072.7212ms.
2026-01-01 01:23:47.217 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleReportDTO'.
2026-01-01 01:23:47.248 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) in 7259.2302ms
2026-01-01 01:23:47.256 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2026-01-01 01:23:47.280 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - 200 null application/json; charset=utf-8 7897.5831ms
2026-01-01 01:24:12.440 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - null 0
2026-01-01 01:24:12.506 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 01:24:12.543 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 01:24:12.655 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-01 01:24:12.890 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 01:24:12.910 +02:00 [WRN] Gift 1 has already been raffled
2026-01-01 01:24:12.918 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 256.8107ms.
2026-01-01 01:24:12.928 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-01 01:24:12.937 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 387.2255ms
2026-01-01 01:24:12.945 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 01:24:12.954 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - 400 null text/plain; charset=utf-8 515.3235ms
2026-01-01 01:24:37.979 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - null 0
2026-01-01 01:24:38.032 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2026-01-01 01:24:38.041 +02:00 [INF] Route matched with {action = "RaffleAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleAll() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 01:24:38.123 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) - Validation state: "Valid"
2026-01-01 01:24:38.132 +02:00 [INF] Starting raffle for all gifts
2026-01-01 01:24:38.349 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2026-01-01 01:24:38.383 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[GiftId] = @__id_0 AND [s].[IsDraft] = CAST(0 AS bit)
2026-01-01 01:24:38.420 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:24:38.440 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[GiftId] = @__id_0 AND [s].[IsDraft] = CAST(0 AS bit)
2026-01-01 01:24:38.466 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:24:38.486 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[GiftId] = @__id_0 AND [s].[IsDraft] = CAST(0 AS bit)
2026-01-01 01:24:38.514 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:24:38.534 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[GiftId] = @__id_0 AND [s].[IsDraft] = CAST(0 AS bit)
2026-01-01 01:24:38.550 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:24:38.563 +02:00 [INF] Raffle completed successfully
2026-01-01 01:24:38.566 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 434.3955ms.
2026-01-01 01:24:38.575 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleReportDTO'.
2026-01-01 01:24:38.582 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) in 526.4269ms
2026-01-01 01:24:38.590 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2026-01-01 01:24:38.597 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - 200 null application/json; charset=utf-8 620.6405ms
2026-01-01 01:25:28.269 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 137
2026-01-01 01:25:28.306 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-01 01:25:28.323 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 01:25:28.454 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Post (WebApiProject) - Validation state: "Valid"
2026-01-01 01:25:28.466 +02:00 [INF] Fetching donor with id 3
2026-01-01 01:25:28.552 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[Name], [t].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM (
    SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
    FROM [Donors] AS [d]
    WHERE [d].[Id] = @__id_0
) AS [t]
LEFT JOIN [Gifts] AS [g] ON [t].[Id] = [g].[DonorId]
ORDER BY [t].[Id]
2026-01-01 01:25:28.592 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 130.6065ms.
2026-01-01 01:25:28.601 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2026-01-01 01:25:28.617 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 287.0105ms
2026-01-01 01:25:28.661 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-01 01:25:28.678 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 404 null text/plain; charset=utf-8 411.0711ms
2026-01-01 01:26:45.300 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 139
2026-01-01 01:26:45.364 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-01 01:26:45.368 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 01:26:45.440 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Post (WebApiProject) - Validation state: "Valid"
2026-01-01 01:26:45.449 +02:00 [INF] Fetching donor with id 7
2026-01-01 01:26:45.471 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[Name], [t].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM (
    SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
    FROM [Donors] AS [d]
    WHERE [d].[Id] = @__id_0
) AS [t]
LEFT JOIN [Gifts] AS [g] ON [t].[Id] = [g].[DonorId]
ORDER BY [t].[Id]
2026-01-01 01:26:45.489 +02:00 [INF] Adding new gift
2026-01-01 01:26:45.619 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CardPrice], [Category], [DonorId], [Name])
OUTPUT INSERTED.[Id], INSERTED.[IsRaffled]
VALUES (@p0, @p1, @p2, @p3);
2026-01-01 01:26:45.691 +02:00 [INF] Gift added successfully
2026-01-01 01:26:45.697 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 247.9157ms.
2026-01-01 01:26:45.704 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 01:26:45.712 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 338.1431ms
2026-01-01 01:26:45.749 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2026-01-01 01:26:45.754 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 200 null text/plain; charset=utf-8 454.255ms
2026-01-01 01:27:43.195 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping/3/confirm - null 0
2026-01-01 01:27:43.248 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-01 01:27:43.267 +02:00 [INF] Route matched with {action = "ConfirmShopping", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmShopping(Int32) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-01 01:27:43.335 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) - Validation state: "Valid"
2026-01-01 01:27:43.417 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[Id] = @__id_0
2026-01-01 01:27:43.817 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 468.5321ms.
2026-01-01 01:27:43.827 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-01 01:27:43.836 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) in 554.77ms
2026-01-01 01:27:43.870 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-01 01:27:43.877 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping/3/confirm - 400 null text/plain; charset=utf-8 681.1954ms
2026-01-01 01:27:48.804 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping/5/confirm - null 0
2026-01-01 01:27:48.835 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-01 01:27:48.842 +02:00 [INF] Route matched with {action = "ConfirmShopping", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmShopping(Int32) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-01 01:27:48.914 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) - Validation state: "Valid"
2026-01-01 01:27:48.942 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[Id] = @__id_0
2026-01-01 01:27:49.173 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 250.9549ms.
2026-01-01 01:27:49.179 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2026-01-01 01:27:49.185 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) in 329.1891ms
2026-01-01 01:27:49.190 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-01 01:27:49.195 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping/5/confirm - 400 null text/plain; charset=utf-8 390.9464ms
2026-01-01 01:28:16.708 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 50
2026-01-01 01:28:16.753 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-01 01:28:16.771 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-01 01:28:16.840 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-01 01:28:16.860 +02:00 [INF] Fetching user 3
2026-01-01 01:28:16.918 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-01 01:28:16.935 +02:00 [INF] Fetching gift 5
2026-01-01 01:28:16.962 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 01:28:16.987 +02:00 [INF] Adding shopping
2026-01-01 01:28:16.994 +02:00 [INF] Fetching gift 5
2026-01-01 01:28:17.008 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 01:28:17.056 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Shoppings] ([GiftId], [IsDraft], [Quantity], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2026-01-01 01:28:17.076 +02:00 [INF] Shopping added successfully
2026-01-01 01:28:17.083 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 236.7185ms.
2026-01-01 01:28:17.094 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 01:28:17.103 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 323.2371ms
2026-01-01 01:28:17.120 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-01 01:28:17.155 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 200 null text/plain; charset=utf-8 448.1089ms
2026-01-01 01:28:40.110 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping/13/confirm - null 0
2026-01-01 01:28:40.187 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-01 01:28:40.194 +02:00 [INF] Route matched with {action = "ConfirmShopping", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmShopping(Int32) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-01 01:28:40.262 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) - Validation state: "Valid"
2026-01-01 01:28:40.288 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[Id] = @__id_0
2026-01-01 01:28:40.320 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Shoppings] SET [GiftId] = @p0, [IsDraft] = @p1, [Quantity] = @p2, [UserId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2026-01-01 01:28:40.336 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.8032ms.
2026-01-01 01:28:40.348 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-01 01:28:40.358 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject) in 151.261ms
2026-01-01 01:28:40.385 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.ConfirmShopping (WebApiProject)'
2026-01-01 01:28:40.395 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping/13/confirm - 200 null text/plain; charset=utf-8 284.7304ms
2026-01-01 01:29:51.233 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/5/raffle - null 0
2026-01-01 01:29:51.280 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 01:29:51.288 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2026-01-01 01:29:51.354 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2026-01-01 01:29:51.395 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 01:29:51.435 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2026-01-01 01:29:51.457 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 95.1503ms.
2026-01-01 01:29:51.469 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleResultDTO'.
2026-01-01 01:29:51.478 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 178.0363ms
2026-01-01 01:29:51.527 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2026-01-01 01:29:51.537 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/5/raffle - 200 null application/json; charset=utf-8 305.4512ms
2026-01-01 01:32:42.603 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 50
2026-01-01 01:32:42.624 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-01 01:32:42.629 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-01 01:32:42.689 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-01 01:32:42.695 +02:00 [INF] Fetching user 2
2026-01-01 01:32:42.732 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-01 01:32:42.765 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 70.6655ms.
2026-01-01 01:32:42.775 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2026-01-01 01:32:42.787 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 148.9659ms
2026-01-01 01:32:42.797 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-01 01:32:42.810 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 404 null text/plain; charset=utf-8 207.2934ms
2026-01-01 01:32:52.854 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 50
2026-01-01 01:32:52.866 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-01 01:32:52.870 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2026-01-01 01:32:52.940 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2026-01-01 01:32:52.952 +02:00 [INF] Fetching user 1
2026-01-01 01:32:52.972 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2026-01-01 01:32:52.990 +02:00 [INF] Fetching gift 5
2026-01-01 01:32:53.032 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 01:32:53.049 +02:00 [INF] Adding shopping
2026-01-01 01:32:53.056 +02:00 [INF] Fetching gift 5
2026-01-01 01:32:53.070 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2026-01-01 01:32:53.083 +02:00 [WRN] Cannot buy a gift 5 that has already been raffled
2026-01-01 01:32:53.237 +02:00 [ERR] Error while adding shopping
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
2026-01-01 01:32:53.624 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 746.6115ms
2026-01-01 01:32:53.632 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2026-01-01 01:32:53.647 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingCreateDTO createDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 86
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-01 01:32:53.682 +02:00 [ERR] Error occurred
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingCreateDTO createDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 86
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2026-01-01 01:32:53.715 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 500 null application/json; charset=utf-8 861.0869ms
