2025-12-31 20:23:07.564 +02:00 [INF] Executed DbCommand (212ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-31 20:23:10.581 +02:00 [INF] Executed DbCommand (417ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-31 20:23:10.633 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-31 20:23:10.646 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-31 20:23:10.973 +02:00 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-31 20:23:11.113 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-12-31 20:27:47.907 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 20:27:48.931 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 20:27:48.945 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 20:27:49.298 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 20:27:49.305 +02:00 [INF] Hosting environment: Development
2025-12-31 20:27:49.320 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 20:27:56.617 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 20:28:09.692 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 13516.489ms
2025-12-31 20:28:11.317 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 20:28:11.415 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 20:30:32.991 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 20:30:33.954 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 20:30:33.970 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 20:30:34.640 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 20:30:34.876 +02:00 [INF] Hosting environment: Development
2025-12-31 20:30:37.344 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 20:30:42.949 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 20:30:55.968 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 13366.0751ms
2025-12-31 20:30:58.011 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 20:30:58.011 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 20:31:01.878 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 3836.5905ms
2025-12-31 20:31:03.139 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 20:31:02.763 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 4752.5498ms
2025-12-31 20:31:05.244 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 2106.3089ms
2025-12-31 20:31:30.802 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - null 0
2025-12-31 20:31:34.387 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 20:31:34.553 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 20:31:36.753 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 20:31:44.511 +02:00 [ERR] Failed executing DbCommand (284ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN [Shoppings] AS [s] ON [t].[Id] = [s].[GiftId]
ORDER BY [t].[Id], [t].[Id0]
2025-12-31 20:31:44.841 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
2025-12-31 20:31:45.823 +02:00 [ERR] Error while raffling gift 1
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
2025-12-31 20:31:46.362 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 11756.4759ms
2025-12-31 20:31:46.388 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 20:31:46.420 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
   at WebApiProject.Controllers.GiftController.RaffleGift(Int32 id) in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 128
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
2025-12-31 20:31:47.029 +02:00 [FTL] Unhandled exception
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
   at WebApiProject.Controllers.GiftController.RaffleGift(Int32 id) in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 128
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
2025-12-31 20:31:47.264 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - 500 null application/json; charset=utf-8 16465.3658ms
2025-12-31 20:31:59.257 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/2/raffle - null 0
2025-12-31 20:31:59.373 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 20:31:59.385 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 20:31:59.719 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 20:32:00.857 +02:00 [ERR] Failed executing DbCommand (64ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN [Shoppings] AS [s] ON [t].[Id] = [s].[GiftId]
ORDER BY [t].[Id], [t].[Id0]
2025-12-31 20:32:00.900 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
2025-12-31 20:32:01.490 +02:00 [ERR] Error while raffling gift 2
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
2025-12-31 20:32:01.923 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 2510.6343ms
2025-12-31 20:32:01.936 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 20:32:01.945 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
   at WebApiProject.Controllers.GiftController.RaffleGift(Int32 id) in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 128
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
2025-12-31 20:32:02.025 +02:00 [FTL] Unhandled exception
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
   at WebApiProject.Controllers.GiftController.RaffleGift(Int32 id) in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 128
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:086c559f-cc1f-4e36-8178-aed7be3ff6ab
Error Number:207,State:1,Class:16
2025-12-31 20:32:02.735 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/2/raffle - 500 null application/json; charset=utf-8 3471.5136ms
2025-12-31 20:38:31.924 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 20:38:33.222 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 20:38:33.229 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 20:38:33.513 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 20:38:33.522 +02:00 [INF] Hosting environment: Development
2025-12-31 20:38:33.545 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 20:38:38.604 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 20:38:56.073 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 17804.7712ms
2025-12-31 20:38:58.083 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 20:38:58.208 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 20:39:00.422 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 2320.6297ms
2025-12-31 20:39:03.599 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 5391.2835ms
2025-12-31 20:39:04.098 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 20:39:07.384 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 3287.283ms
2025-12-31 20:39:32.652 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2025-12-31 20:39:36.819 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 20:39:37.150 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2025-12-31 20:39:46.185 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2025-12-31 20:39:47.154 +02:00 [INF] Validating user login for r@r
2025-12-31 20:40:30.068 +02:00 [INF] Executed DbCommand (187ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-31 20:40:33.309 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 46350.4127ms.
2025-12-31 20:40:33.353 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-31 20:40:33.437 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 56006.632ms
2025-12-31 20:40:33.446 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 20:40:33.480 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 60831.4684ms
2025-12-31 20:41:03.266 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - null 0
2025-12-31 20:41:04.107 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 20:41:04.159 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 20:41:04.331 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 20:41:05.580 +02:00 [ERR] Failed executing DbCommand (193ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 20:41:05.713 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:66d3065e-526c-4a84-a2e5-f61cfadb3a98
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:66d3065e-526c-4a84-a2e5-f61cfadb3a98
Error Number:207,State:1,Class:16
2025-12-31 20:41:06.212 +02:00 [ERR] Error while raffling gift 1
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
ClientConnectionId:66d3065e-526c-4a84-a2e5-f61cfadb3a98
Error Number:207,State:1,Class:16
2025-12-31 20:41:06.991 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 2815.2333ms
2025-12-31 20:41:07.006 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 20:41:07.064 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
   at WebApiProject.Controllers.GiftController.RaffleGift(Int32 id) in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 128
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:66d3065e-526c-4a84-a2e5-f61cfadb3a98
Error Number:207,State:1,Class:16
2025-12-31 20:41:07.208 +02:00 [FTL] Unhandled exception
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.Raffle(Int32 giftId) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 271
   at WebApiProject.Controllers.GiftController.RaffleGift(Int32 id) in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 128
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:66d3065e-526c-4a84-a2e5-f61cfadb3a98
Error Number:207,State:1,Class:16
2025-12-31 20:41:07.462 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - 500 null application/json; charset=utf-8 4197.8711ms
2025-12-31 22:07:36.650 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 22:07:37.241 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 22:07:37.244 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 22:07:37.325 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 22:07:37.328 +02:00 [INF] Hosting environment: Development
2025-12-31 22:07:37.330 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 22:07:37.673 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger - null null
2025-12-31 22:07:38.107 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger - 301 0 null 445.3151ms
2025-12-31 22:07:38.126 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 22:07:38.419 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/swagger-ui.css - null null
2025-12-31 22:07:38.419 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/swagger-ui-bundle.js - null null
2025-12-31 22:07:38.421 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/swagger-ui-standalone-preset.js - null null
2025-12-31 22:07:38.451 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 22:07:38.494 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 367.922ms
2025-12-31 22:07:38.469 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 22:07:38.648 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-31 22:07:38.655 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 186.6686ms
2025-12-31 22:07:38.659 +02:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-12-31 22:07:38.660 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/swagger-ui.css - 200 143943 text/css 241.1621ms
2025-12-31 22:07:38.678 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 257.3093ms
2025-12-31 22:07:38.720 +02:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-12-31 22:07:38.725 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 306.1984ms
2025-12-31 22:07:38.728 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 278.0548ms
2025-12-31 22:07:38.821 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 22:07:38.854 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.3597ms
2025-12-31 22:08:01.352 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2025-12-31 22:08:04.388 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 22:08:04.437 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2025-12-31 22:08:05.637 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2025-12-31 22:08:05.909 +02:00 [INF] Validating user login for r@r
2025-12-31 22:08:10.527 +02:00 [INF] Executed DbCommand (278ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-31 22:08:11.545 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5898.6428ms.
2025-12-31 22:08:11.559 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-31 22:08:11.575 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 7123.3237ms
2025-12-31 22:08:11.580 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 22:08:11.603 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 10282.7577ms
2025-12-31 22:08:29.327 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Donor - null null
2025-12-31 22:08:29.458 +02:00 [INF] Executing endpoint 'DonorController.Get (WebApiProject)'
2025-12-31 22:08:29.476 +02:00 [INF] Route matched with {action = "Get", controller = "Donor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller DonorController (WebApiProject).
2025-12-31 22:08:29.535 +02:00 [INF] Executing action method DonorController.Get (WebApiProject) - Validation state: "Valid"
2025-12-31 22:08:29.549 +02:00 [INF] Fetching all donors
2025-12-31 22:08:29.833 +02:00 [ERR] Failed executing DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Donors] AS [d]
LEFT JOIN [Gifts] AS [g] ON [d].[Id] = [g].[DonorId]
ORDER BY [d].[Id]
2025-12-31 22:08:29.901 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:08:30.103 +02:00 [ERR] Error while fetching donors
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.DonorDAL.Get() in E:\WebApiProject\WebApiProject\DAL\DonorDAL.cs:line 19
   at WebApiProject.BLL.DonorBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\DonorBLLService.cs:line 29
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:08:30.293 +02:00 [INF] Executed action DonorController.Get (WebApiProject) in 808.1607ms
2025-12-31 22:08:30.298 +02:00 [INF] Executed endpoint 'DonorController.Get (WebApiProject)'
2025-12-31 22:08:30.304 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.DonorDAL.Get() in E:\WebApiProject\WebApiProject\DAL\DonorDAL.cs:line 19
   at WebApiProject.BLL.DonorBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\DonorBLLService.cs:line 29
   at DonorController.Get() in E:\WebApiProject\WebApiProject\Controllers\DonorController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:08:30.322 +02:00 [FTL] Unhandled exception
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.DonorDAL.Get() in E:\WebApiProject\WebApiProject\DAL\DonorDAL.cs:line 19
   at WebApiProject.BLL.DonorBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\DonorBLLService.cs:line 29
   at DonorController.Get() in E:\WebApiProject\WebApiProject\Controllers\DonorController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:08:30.343 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Donor - 500 null application/json; charset=utf-8 1017.0024ms
2025-12-31 22:08:50.662 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift - null null
2025-12-31 22:08:50.693 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2025-12-31 22:08:50.704 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:08:50.751 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Get (WebApiProject) - Validation state: "Valid"
2025-12-31 22:08:50.761 +02:00 [INF] Fetching all gifts
2025-12-31 22:08:51.060 +02:00 [ERR] Failed executing DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2025-12-31 22:08:51.080 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:08:51.288 +02:00 [ERR] Error while fetching gifts
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.Get() in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 19
   at WebApiProject.BLL.GiftBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 32
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:08:51.442 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 731.0918ms
2025-12-31 22:08:51.445 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2025-12-31 22:08:51.448 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.Get() in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 19
   at WebApiProject.BLL.GiftBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 32
   at WebApiProject.Controllers.GiftController.Get() in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:08:51.463 +02:00 [FTL] Unhandled exception
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.Get() in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 19
   at WebApiProject.BLL.GiftBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 32
   at WebApiProject.Controllers.GiftController.Get() in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 29
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:08:51.474 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift - 500 null application/json; charset=utf-8 812.3678ms
2025-12-31 22:09:06.816 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift/2 - null null
2025-12-31 22:09:06.845 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2025-12-31 22:09:06.857 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:09:06.902 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Get (WebApiProject) - Validation state: "Valid"
2025-12-31 22:09:06.909 +02:00 [INF] Fetching gift 2
2025-12-31 22:09:06.973 +02:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 22:09:06.983 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:09:07.187 +02:00 [ERR] Error while fetching gift 2
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 110
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:09:07.419 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 555.9353ms
2025-12-31 22:09:07.423 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2025-12-31 22:09:07.426 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 110
   at WebApiProject.Controllers.GiftController.Get(Int32 id) in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:09:07.444 +02:00 [FTL] Unhandled exception
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.GiftDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\GiftDAL.cs:line 31
   at WebApiProject.BLL.GiftBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 110
   at WebApiProject.Controllers.GiftController.Get(Int32 id) in E:\WebApiProject\WebApiProject\Controllers\GiftController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:09:07.468 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift/2 - 500 null application/json; charset=utf-8 652.5772ms
2025-12-31 22:09:20.682 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7164/api/Shopping/5 - application/json 137
2025-12-31 22:09:20.691 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Put (WebApiProject)'
2025-12-31 22:09:20.701 +02:00 [INF] Route matched with {action = "Put", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, WebApiProject.Models.DTO.ShoppingDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2025-12-31 22:09:20.761 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Put (WebApiProject) - Validation state: "Valid"
2025-12-31 22:09:20.769 +02:00 [INF] Fetching shopping 5
2025-12-31 22:09:20.809 +02:00 [ERR] Failed executing DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
WHERE [s].[Id] = @__id_0
2025-12-31 22:09:20.817 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:09:20.931 +02:00 [ERR] Error while fetching shopping 5
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.ShoppingDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\ShoppingDAL.cs:line 37
   at WebApiProject.BLL.ShoppingBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 238
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:09:21.027 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Put (WebApiProject) in 320.0627ms
2025-12-31 22:09:21.029 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Put (WebApiProject)'
2025-12-31 22:09:21.031 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.ShoppingDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\ShoppingDAL.cs:line 37
   at WebApiProject.BLL.ShoppingBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 238
   at WebApiProject.Controllers.ShoppingController.Put(Int32 id, ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 99
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:09:21.041 +02:00 [FTL] Unhandled exception
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at WebApiProject.DAL.ShoppingDAL.GetById(Int32 id) in E:\WebApiProject\WebApiProject\DAL\ShoppingDAL.cs:line 37
   at WebApiProject.BLL.ShoppingBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 238
   at WebApiProject.Controllers.ShoppingController.Put(Int32 id, ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 99
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:d1401c4c-ec54-4eca-a469-c4ae55c1a8a9
Error Number:207,State:1,Class:16
2025-12-31 22:09:21.051 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7164/api/Shopping/5 - 500 null application/json; charset=utf-8 369.9423ms
2025-12-31 22:12:04.041 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 22:12:04.425 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 22:12:04.426 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 22:12:04.479 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 22:12:04.482 +02:00 [INF] Hosting environment: Development
2025-12-31 22:12:04.484 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 22:12:04.926 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 22:12:05.436 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 515.7486ms
2025-12-31 22:12:05.450 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 22:12:05.452 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 22:12:05.497 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 46.3835ms
2025-12-31 22:12:05.613 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 161.303ms
2025-12-31 22:12:05.689 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 22:12:05.773 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.7346ms
2025-12-31 22:12:18.021 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Donor - null null
2025-12-31 22:12:18.332 +02:00 [INF] Executing endpoint 'DonorController.Get (WebApiProject)'
2025-12-31 22:12:18.358 +02:00 [INF] Route matched with {action = "Get", controller = "Donor"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller DonorController (WebApiProject).
2025-12-31 22:12:18.972 +02:00 [INF] Executing action method DonorController.Get (WebApiProject) - Validation state: "Valid"
2025-12-31 22:12:18.980 +02:00 [INF] Fetching all donors
2025-12-31 22:12:21.350 +02:00 [ERR] Failed executing DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Donors] AS [d]
LEFT JOIN [Gifts] AS [g] ON [d].[Id] = [g].[DonorId]
ORDER BY [d].[Id]
2025-12-31 22:12:21.446 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'WebApiProject.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:09da875c-427b-497c-b1b5-075c1ea7a175
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:09da875c-427b-497c-b1b5-075c1ea7a175
Error Number:207,State:1,Class:16
2025-12-31 22:12:21.703 +02:00 [ERR] Error while fetching donors
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.DonorDAL.Get() in E:\WebApiProject\WebApiProject\DAL\DonorDAL.cs:line 19
   at WebApiProject.BLL.DonorBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\DonorBLLService.cs:line 29
ClientConnectionId:09da875c-427b-497c-b1b5-075c1ea7a175
Error Number:207,State:1,Class:16
2025-12-31 22:12:21.894 +02:00 [INF] Executed action DonorController.Get (WebApiProject) in 3525.8415ms
2025-12-31 22:12:21.898 +02:00 [INF] Executed endpoint 'DonorController.Get (WebApiProject)'
2025-12-31 22:12:21.907 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.DonorDAL.Get() in E:\WebApiProject\WebApiProject\DAL\DonorDAL.cs:line 19
   at WebApiProject.BLL.DonorBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\DonorBLLService.cs:line 29
   at DonorController.Get() in E:\WebApiProject\WebApiProject\Controllers\DonorController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:09da875c-427b-497c-b1b5-075c1ea7a175
Error Number:207,State:1,Class:16
2025-12-31 22:12:21.930 +02:00 [ERR] Error occurred
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'IsRaffled'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at WebApiProject.DAL.DonorDAL.Get() in E:\WebApiProject\WebApiProject\DAL\DonorDAL.cs:line 19
   at WebApiProject.BLL.DonorBLLService.Get() in E:\WebApiProject\WebApiProject\BLL\DonorBLLService.cs:line 29
   at DonorController.Get() in E:\WebApiProject\WebApiProject\Controllers\DonorController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:09da875c-427b-497c-b1b5-075c1ea7a175
Error Number:207,State:1,Class:16
2025-12-31 22:12:21.957 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Donor - 500 null application/json; charset=utf-8 3937.0703ms
2025-12-31 22:16:00.136 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 22:16:00.714 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 22:16:00.720 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 22:16:00.856 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 22:16:00.860 +02:00 [INF] Hosting environment: Development
2025-12-31 22:16:00.866 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 22:16:01.152 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 22:16:01.618 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 475.8704ms
2025-12-31 22:16:01.626 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 22:16:01.626 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 22:16:01.639 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 13.3069ms
2025-12-31 22:16:01.725 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 98.5376ms
2025-12-31 22:16:01.763 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 22:16:01.824 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 61.483ms
2025-12-31 22:16:57.228 +02:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-31 22:16:57.329 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-31 22:16:57.333 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-12-31 22:16:57.334 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-31 22:16:57.366 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-31 22:16:57.395 +02:00 [INF] Applying migration '20251231201641_AddIsRaffledToGift'.
2025-12-31 22:16:57.553 +02:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Gifts] ADD [IsRaffled] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-12-31 22:16:57.558 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251231201641_AddIsRaffledToGift', N'8.0.0');
2025-12-31 22:19:36.122 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 22:19:36.325 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 22:19:36.328 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 22:19:36.402 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 22:19:36.405 +02:00 [INF] Hosting environment: Development
2025-12-31 22:19:36.406 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 22:19:36.904 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 22:19:37.154 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 249.443ms
2025-12-31 22:19:37.166 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 22:19:37.166 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 22:19:37.193 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 27.5007ms
2025-12-31 22:19:37.234 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.3412ms
2025-12-31 22:19:37.273 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 22:19:37.315 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 42.4603ms
2025-12-31 22:19:57.618 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift - null null
2025-12-31 22:19:57.730 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2025-12-31 22:19:57.751 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:19:58.161 +02:00 [INF] Fetching all gifts
2025-12-31 22:19:59.827 +02:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2025-12-31 22:19:59.970 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.GiftDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-31 22:19:59.988 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 2226.5008ms
2025-12-31 22:19:59.991 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2025-12-31 22:20:00.001 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift - 200 null application/json; charset=utf-8 2383.6847ms
2025-12-31 22:20:12.370 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/5/raffle - null 0
2025-12-31 22:20:12.395 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 22:20:12.425 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:20:12.600 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 22:20:12.611 +02:00 [WRN] Gift 5 not found
2025-12-31 22:20:12.615 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-12-31 22:20:12.619 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 182.7584ms
2025-12-31 22:20:12.622 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 22:20:12.626 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/5/raffle - 400 null text/plain; charset=utf-8 256.0519ms
2025-12-31 22:20:22.566 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - null 0
2025-12-31 22:20:22.586 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 22:20:22.592 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:20:22.716 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 22:20:22.842 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-12-31 22:20:22.865 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleResultDTO'.
2025-12-31 22:20:22.877 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 279.6031ms
2025-12-31 22:20:22.886 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 22:20:22.896 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - 200 null application/json; charset=utf-8 330.4454ms
2025-12-31 22:20:48.842 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 119
2025-12-31 22:20:48.855 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2025-12-31 22:20:48.865 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2025-12-31 22:20:48.900 +02:00 [INF] Fetching user 3
2025-12-31 22:20:48.919 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-12-31 22:20:48.927 +02:00 [INF] Fetching gift 1
2025-12-31 22:20:48.932 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 22:20:48.953 +02:00 [ERR] Error while fetching gift 1
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Gift -> GiftDTO
WebApiProject.Models.Gift -> WebApiProject.Models.DTO.GiftDTO

Type Map configuration:
Gift -> GiftDTO
WebApiProject.Models.Gift -> WebApiProject.Models.DTO.GiftDTO

Destination Member:
Shoppings

 ---> AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Shopping -> ShoppingDTO
WebApiProject.Models.Shopping -> WebApiProject.Models.DTO.ShoppingDTO

Type Map configuration:
Shopping -> ShoppingDTO
WebApiProject.Models.Shopping -> WebApiProject.Models.DTO.ShoppingDTO

Destination Member:
Phone

 ---> System.FormatException: The input string 'a' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   at WebApiProject.BLL.GiftBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 111
2025-12-31 22:20:49.021 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 147.081ms
2025-12-31 22:20:49.023 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2025-12-31 22:20:49.029 +02:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Gift -> GiftDTO
WebApiProject.Models.Gift -> WebApiProject.Models.DTO.GiftDTO

Type Map configuration:
Gift -> GiftDTO
WebApiProject.Models.Gift -> WebApiProject.Models.DTO.GiftDTO

Destination Member:
Shoppings

 ---> AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Shopping -> ShoppingDTO
WebApiProject.Models.Shopping -> WebApiProject.Models.DTO.ShoppingDTO

Type Map configuration:
Shopping -> ShoppingDTO
WebApiProject.Models.Shopping -> WebApiProject.Models.DTO.ShoppingDTO

Destination Member:
Phone

 ---> System.FormatException: The input string 'a' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   at WebApiProject.BLL.GiftBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 111
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-31 22:20:49.048 +02:00 [ERR] Error occurred
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Gift -> GiftDTO
WebApiProject.Models.Gift -> WebApiProject.Models.DTO.GiftDTO

Type Map configuration:
Gift -> GiftDTO
WebApiProject.Models.Gift -> WebApiProject.Models.DTO.GiftDTO

Destination Member:
Shoppings

 ---> AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Shopping -> ShoppingDTO
WebApiProject.Models.Shopping -> WebApiProject.Models.DTO.ShoppingDTO

Type Map configuration:
Shopping -> ShoppingDTO
WebApiProject.Models.Shopping -> WebApiProject.Models.DTO.ShoppingDTO

Destination Member:
Phone

 ---> System.FormatException: The input string 'a' was not in a correct format.
   at System.Number.ThrowFormatException[TChar](ReadOnlySpan`1 value)
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method305(Closure, Object, GiftDTO, ResolutionContext)
   at WebApiProject.BLL.GiftBLLService.GetById(Int32 id) in E:\WebApiProject\WebApiProject\BLL\GiftBLLService.cs:line 111
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-31 22:20:49.064 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 500 null application/json; charset=utf-8 221.7389ms
2025-12-31 22:46:54.039 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 22:46:54.517 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 22:46:54.523 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 22:46:54.654 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 22:46:54.658 +02:00 [INF] Hosting environment: Development
2025-12-31 22:46:54.661 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 22:46:54.891 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 22:46:55.298 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 422.3684ms
2025-12-31 22:46:55.306 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 22:46:55.306 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 22:46:55.324 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 18.1337ms
2025-12-31 22:46:55.414 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 107.8855ms
2025-12-31 22:46:55.441 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 22:46:55.497 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 57.0255ms
2025-12-31 22:47:12.868 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2025-12-31 22:47:13.025 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 22:47:13.066 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2025-12-31 22:47:13.609 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2025-12-31 22:47:13.644 +02:00 [INF] Validating user login for r@r
2025-12-31 22:47:15.765 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-31 22:47:16.595 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2974.8564ms.
2025-12-31 22:47:16.614 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-31 22:47:16.631 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 3553.1614ms
2025-12-31 22:47:16.636 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 22:47:16.648 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 3781.1009ms
2025-12-31 22:48:07.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift - null null
2025-12-31 22:48:07.294 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2025-12-31 22:48:07.302 +02:00 [INF] Route matched with {action = "Get", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:48:07.339 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Get (WebApiProject) - Validation state: "Valid"
2025-12-31 22:48:07.347 +02:00 [INF] Fetching all gifts
2025-12-31 22:48:07.823 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2025-12-31 22:48:07.958 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 613.4398ms.
2025-12-31 22:48:07.965 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.GiftDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-31 22:48:07.987 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Get (WebApiProject) in 681.2649ms
2025-12-31 22:48:08.009 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Get (WebApiProject)'
2025-12-31 22:48:08.016 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift - 200 null application/json; charset=utf-8 817.4072ms
2025-12-31 22:48:30.721 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Gift/filter?GiftName=a - null null
2025-12-31 22:48:30.768 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.GetFiltered (WebApiProject)'
2025-12-31 22:48:30.788 +02:00 [INF] Route matched with {action = "GetFiltered", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFiltered(WebApiProject.Models.DTO.GiftFilterDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:48:30.865 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.GetFiltered (WebApiProject) - Validation state: "Valid"
2025-12-31 22:48:30.878 +02:00 [INF] Fetching filtered gifts with criteria: {"GiftName":"a","DonorName":null,"Category":null,"SortBy":null,"Desc":false,"$type":"GiftFilterDTO"}
2025-12-31 22:48:31.127 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__filter_GiftName_0_rewritten='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
WHERE [g].[Name] LIKE @__filter_GiftName_0_rewritten ESCAPE N'\'
ORDER BY [g].[Id], [d].[Id]
2025-12-31 22:48:31.138 +02:00 [INF] Successfully fetched 2 gifts
2025-12-31 22:48:31.144 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.GetFiltered (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 274.0044ms.
2025-12-31 22:48:31.150 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.GiftDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-31 22:48:31.155 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.GetFiltered (WebApiProject) in 356.3788ms
2025-12-31 22:48:31.162 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.GetFiltered (WebApiProject)'
2025-12-31 22:48:31.166 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Gift/filter?GiftName=a - 200 null application/json; charset=utf-8 450.8825ms
2025-12-31 22:48:44.338 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - null 0
2025-12-31 22:48:44.364 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 22:48:44.379 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:48:44.436 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 22:48:44.537 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 22:48:44.548 +02:00 [WRN] Gift 1 has already been raffled
2025-12-31 22:48:44.551 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 111.7776ms.
2025-12-31 22:48:44.554 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-12-31 22:48:44.558 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 165.721ms
2025-12-31 22:48:44.562 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 22:48:44.564 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - 400 null text/plain; charset=utf-8 226.0261ms
2025-12-31 22:48:54.088 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/2/raffle - null 0
2025-12-31 22:48:54.097 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 22:48:54.100 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:48:54.137 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 22:48:54.165 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 22:48:54.413 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CardPrice] = @p0, [Category] = @p1, [DonorId] = @p2, [IsRaffled] = @p3, [Name] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2025-12-31 22:48:54.453 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 309.8625ms.
2025-12-31 22:48:54.459 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleResultDTO'.
2025-12-31 22:48:54.467 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 362.5402ms
2025-12-31 22:48:54.472 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 22:48:54.476 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/2/raffle - 200 null application/json; charset=utf-8 387.4594ms
2025-12-31 22:49:05.814 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - null 0
2025-12-31 22:49:05.834 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2025-12-31 22:49:05.847 +02:00 [INF] Route matched with {action = "RaffleAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleAll() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 22:49:05.897 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) - Validation state: "Valid"
2025-12-31 22:49:05.907 +02:00 [INF] Starting raffle for all gifts
2025-12-31 22:49:05.923 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2025-12-31 22:49:05.931 +02:00 [INF] Raffle completed successfully
2025-12-31 22:49:05.934 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.558ms.
2025-12-31 22:49:05.939 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleReportDTO'.
2025-12-31 22:49:05.947 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) in 92.4904ms
2025-12-31 22:49:05.952 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2025-12-31 22:49:05.955 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - 200 null application/json; charset=utf-8 141.2136ms
2025-12-31 23:17:10.845 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 23:17:11.537 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 23:17:11.542 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 23:17:11.837 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 23:17:11.850 +02:00 [INF] Hosting environment: Development
2025-12-31 23:17:11.857 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 23:17:12.208 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 23:17:12.644 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 23:17:12.645 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 23:17:12.658 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 455.6357ms
2025-12-31 23:17:12.734 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 89.8788ms
2025-12-31 23:17:12.827 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 182.7457ms
2025-12-31 23:17:12.983 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 23:17:13.103 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 120.4659ms
2025-12-31 23:17:32.039 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2025-12-31 23:17:32.239 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 23:17:32.304 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2025-12-31 23:17:32.964 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2025-12-31 23:17:32.989 +02:00 [INF] Validating user login for r@r
2025-12-31 23:17:35.803 +02:00 [INF] Executed DbCommand (93ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-31 23:17:36.696 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3722.8683ms.
2025-12-31 23:17:36.714 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-31 23:17:36.734 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 4410.8694ms
2025-12-31 23:17:36.742 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 23:17:36.766 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 4727.4973ms
2025-12-31 23:18:06.258 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - null 0
2025-12-31 23:18:06.416 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2025-12-31 23:18:06.429 +02:00 [INF] Route matched with {action = "RaffleAll", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleAll() on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 23:18:06.482 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) - Validation state: "Valid"
2025-12-31 23:18:06.495 +02:00 [INF] Starting raffle for all gifts
2025-12-31 23:18:06.830 +02:00 [INF] Executed DbCommand (109ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id], [d].[Email], [d].[Name], [d].[Phone], [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId]
FROM [Gifts] AS [g]
INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
LEFT JOIN [Shoppings] AS [s] ON [g].[Id] = [s].[GiftId]
ORDER BY [g].[Id], [d].[Id]
2025-12-31 23:18:06.947 +02:00 [INF] Raffle completed successfully
2025-12-31 23:18:06.953 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 465.7294ms.
2025-12-31 23:18:06.964 +02:00 [INF] Executing OkObjectResult, writing value of type 'WebApiProject.Models.DTO.RaffleReportDTO'.
2025-12-31 23:18:06.975 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject) in 538.7631ms
2025-12-31 23:18:06.981 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleAll (WebApiProject)'
2025-12-31 23:18:06.986 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/raffleAll - 200 null application/json; charset=utf-8 733.7848ms
2025-12-31 23:18:25.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Shopping - null null
2025-12-31 23:18:25.576 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2025-12-31 23:18:25.590 +02:00 [INF] Route matched with {action = "Get", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2025-12-31 23:18:25.647 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject) - Validation state: "Valid"
2025-12-31 23:18:25.654 +02:00 [INF] Fetching all confirmed shoppings
2025-12-31 23:18:25.816 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
2025-12-31 23:18:25.867 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 215.1762ms.
2025-12-31 23:18:25.870 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.ShoppingDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-31 23:18:25.876 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Get (WebApiProject) in 278.5665ms
2025-12-31 23:18:25.879 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2025-12-31 23:18:25.880 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Shopping - 200 null application/json; charset=utf-8 334.0103ms
2025-12-31 23:19:17.372 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 126
2025-12-31 23:19:17.408 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2025-12-31 23:19:17.422 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2025-12-31 23:19:17.491 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2025-12-31 23:19:17.498 +02:00 [INF] Fetching user 1
2025-12-31 23:19:17.524 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-12-31 23:19:17.553 +02:00 [INF] Fetching gift 2
2025-12-31 23:19:17.627 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 23:19:17.651 +02:00 [INF] Adding shopping
2025-12-31 23:19:17.659 +02:00 [INF] Fetching gift 2
2025-12-31 23:19:17.699 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 23:19:17.720 +02:00 [WRN] Cannot buy a gift 2 that has already been raffled
2025-12-31 23:19:17.992 +02:00 [ERR] Error while adding shopping
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
2025-12-31 23:19:18.267 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 836.2025ms
2025-12-31 23:19:18.273 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2025-12-31 23:19:18.280 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 77
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-31 23:19:18.297 +02:00 [ERR] Error occurred
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 77
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-31 23:19:18.323 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 500 null application/json; charset=utf-8 951.5302ms
2025-12-31 23:33:11.798 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 23:33:12.346 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 23:33:12.348 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 23:33:12.483 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 23:33:12.491 +02:00 [INF] Hosting environment: Development
2025-12-31 23:33:12.497 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 23:33:13.225 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 23:33:13.704 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 23:33:13.704 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 23:33:13.713 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 496.6629ms
2025-12-31 23:33:13.786 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 82.7809ms
2025-12-31 23:33:13.857 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 154.0064ms
2025-12-31 23:33:13.902 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 23:33:13.947 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.2675ms
2025-12-31 23:33:28.522 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2025-12-31 23:33:28.775 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 23:33:28.829 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2025-12-31 23:33:29.563 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2025-12-31 23:33:29.616 +02:00 [INF] Validating user login for r@r
2025-12-31 23:33:31.603 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-31 23:33:32.529 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2950.9582ms.
2025-12-31 23:33:32.545 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-31 23:33:32.561 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 3712.9612ms
2025-12-31 23:33:32.566 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 23:33:32.606 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 4083.6479ms
2025-12-31 23:35:46.377 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 23:35:46.635 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 23:35:46.642 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 23:35:46.739 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 23:35:46.744 +02:00 [INF] Hosting environment: Development
2025-12-31 23:35:46.748 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 23:35:47.155 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 23:35:47.372 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 218.6562ms
2025-12-31 23:35:47.378 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 23:35:47.378 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 23:35:47.394 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 15.2456ms
2025-12-31 23:35:47.431 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.4328ms
2025-12-31 23:35:47.461 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 23:35:47.506 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 45.0088ms
2025-12-31 23:36:11.641 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 23:36:12.082 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 23:36:12.088 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 23:36:12.179 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 23:36:12.184 +02:00 [INF] Hosting environment: Development
2025-12-31 23:36:12.186 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 23:36:12.511 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 23:36:12.969 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 469.8032ms
2025-12-31 23:36:12.985 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 23:36:12.985 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 23:36:13.017 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 32.3344ms
2025-12-31 23:36:13.085 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 101.2466ms
2025-12-31 23:36:13.125 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 23:36:13.169 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.6338ms
2025-12-31 23:36:30.855 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - null 0
2025-12-31 23:36:31.113 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 23:36:31.164 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 23:36:31.734 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 23:36:34.128 +02:00 [INF] Executed DbCommand (120ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 23:36:34.322 +02:00 [WRN] Gift 1 has already been raffled
2025-12-31 23:36:34.332 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 2587.795ms.
2025-12-31 23:36:34.348 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-12-31 23:36:34.357 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 3180.7042ms
2025-12-31 23:36:34.361 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 23:36:34.375 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/1/raffle - 400 null text/plain; charset=utf-8 3521.5777ms
2025-12-31 23:36:45.854 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/2/raffle - null 0
2025-12-31 23:36:45.877 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 23:36:45.883 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 23:36:45.941 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 23:36:45.990 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 23:36:45.998 +02:00 [WRN] Gift 2 has already been raffled
2025-12-31 23:36:46.002 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 54.5295ms.
2025-12-31 23:36:46.008 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-12-31 23:36:46.011 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 122.3438ms
2025-12-31 23:36:46.015 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 23:36:46.018 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/2/raffle - 400 null text/plain; charset=utf-8 164.7977ms
2025-12-31 23:36:51.641 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/3/raffle - null 0
2025-12-31 23:36:51.655 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 23:36:51.660 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 23:36:51.706 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 23:36:51.822 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 23:36:51.826 +02:00 [WRN] Gift 3 not found
2025-12-31 23:36:51.828 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 118.1118ms.
2025-12-31 23:36:51.830 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-12-31 23:36:51.832 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 166.7662ms
2025-12-31 23:36:51.833 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 23:36:51.835 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/3/raffle - 400 null text/plain; charset=utf-8 193.9586ms
2025-12-31 23:37:08.031 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/api/Shopping - null null
2025-12-31 23:37:08.049 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2025-12-31 23:37:08.068 +02:00 [INF] Route matched with {action = "Get", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get() on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2025-12-31 23:37:08.136 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject) - Validation state: "Valid"
2025-12-31 23:37:08.145 +02:00 [INF] Fetching all confirmed shoppings
2025-12-31 23:37:08.213 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM [Shoppings] AS [s]
INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
INNER JOIN [Gifts] AS [g] ON [s].[GiftId] = [g].[Id]
2025-12-31 23:37:08.264 +02:00 [INF] Executed action method WebApiProject.Controllers.ShoppingController.Get (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 122.0136ms.
2025-12-31 23:37:08.275 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebApiProject.Models.DTO.ShoppingDTO, WebApiProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-31 23:37:08.304 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Get (WebApiProject) in 213.7922ms
2025-12-31 23:37:08.315 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Get (WebApiProject)'
2025-12-31 23:37:08.323 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/api/Shopping - 200 null application/json; charset=utf-8 300.8619ms
2025-12-31 23:37:42.636 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Shopping - application/json 49
2025-12-31 23:37:42.668 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2025-12-31 23:37:42.684 +02:00 [INF] Route matched with {action = "Post", controller = "Shopping"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.ShoppingCreateDTO) on controller WebApiProject.Controllers.ShoppingController (WebApiProject).
2025-12-31 23:37:42.767 +02:00 [INF] Executing action method WebApiProject.Controllers.ShoppingController.Post (WebApiProject) - Validation state: "Valid"
2025-12-31 23:37:42.787 +02:00 [INF] Fetching user 1
2025-12-31 23:37:42.830 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Id] = @__id_0
2025-12-31 23:37:42.846 +02:00 [INF] Fetching gift 2
2025-12-31 23:37:42.874 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 23:37:42.893 +02:00 [INF] Adding shopping
2025-12-31 23:37:42.897 +02:00 [INF] Fetching gift 2
2025-12-31 23:37:42.905 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 23:37:42.915 +02:00 [WRN] Cannot buy a gift 2 that has already been raffled
2025-12-31 23:37:43.072 +02:00 [ERR] Error while adding shopping
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
2025-12-31 23:37:43.377 +02:00 [INF] Executed action WebApiProject.Controllers.ShoppingController.Post (WebApiProject) in 685.0951ms
2025-12-31 23:37:43.387 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.ShoppingController.Post (WebApiProject)'
2025-12-31 23:37:43.402 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingCreateDTO createDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-31 23:37:43.444 +02:00 [ERR] Error occurred
System.Exception: Cannot buy a gift that has already been raffled.
   at WebApiProject.BLL.ShoppingBLLService.Add(ShoppingDTO shoppingDTO) in E:\WebApiProject\WebApiProject\BLL\ShoppingBLLService.cs:line 168
   at WebApiProject.Controllers.ShoppingController.Post(ShoppingCreateDTO createDTO) in E:\WebApiProject\WebApiProject\Controllers\ShoppingController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-12-31 23:37:43.481 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Shopping - 500 null application/json; charset=utf-8 845.3035ms
2025-12-31 23:51:24.730 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-31 23:51:25.233 +02:00 [INF] Now listening on: https://localhost:7164
2025-12-31 23:51:25.239 +02:00 [INF] Now listening on: http://localhost:5205
2025-12-31 23:51:25.362 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-31 23:51:25.368 +02:00 [INF] Hosting environment: Development
2025-12-31 23:51:25.377 +02:00 [INF] Content root path: E:\WebApiProject\WebApiProject
2025-12-31 23:51:25.758 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/index.html - null null
2025-12-31 23:51:26.220 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/index.html - 200 null text/html;charset=utf-8 468.4122ms
2025-12-31 23:51:26.224 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - null null
2025-12-31 23:51:26.224 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/_vs/browserLink - null null
2025-12-31 23:51:26.277 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 53.5047ms
2025-12-31 23:51:26.448 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/_vs/browserLink - 200 null text/javascript; charset=UTF-8 224.1964ms
2025-12-31 23:51:26.547 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - null null
2025-12-31 23:51:26.649 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7164/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.9465ms
2025-12-31 23:51:52.363 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Auth/login - application/json 42
2025-12-31 23:51:52.569 +02:00 [INF] Executing endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 23:51:52.625 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApiProject.Models.DTO.LoginRequestDTO) on controller AuthController (WebApiProject).
2025-12-31 23:51:53.286 +02:00 [INF] Executing action method AuthController.Login (WebApiProject) - Validation state: "Valid"
2025-12-31 23:51:53.348 +02:00 [INF] Validating user login for r@r
2025-12-31 23:51:55.323 +02:00 [INF] Executed DbCommand (62ms) [Parameters=[@__email_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
FROM [Users] AS [u]
WHERE [u].[Email] = @__email_0
2025-12-31 23:51:56.193 +02:00 [INF] Executed action method AuthController.Login (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2890.4822ms.
2025-12-31 23:51:56.208 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-31 23:51:56.223 +02:00 [INF] Executed action AuthController.Login (WebApiProject) in 3579.4889ms
2025-12-31 23:51:56.229 +02:00 [INF] Executed endpoint 'AuthController.Login (WebApiProject)'
2025-12-31 23:51:56.245 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Auth/login - 200 null application/json; charset=utf-8 3884.1036ms
2025-12-31 23:53:47.226 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 136
2025-12-31 23:53:47.323 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2025-12-31 23:53:47.331 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 23:53:47.381 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Post (WebApiProject) - Validation state: "Valid"
2025-12-31 23:53:47.391 +02:00 [INF] Fetching donor with id 1
2025-12-31 23:53:47.564 +02:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[Name], [t].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM (
    SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
    FROM [Donors] AS [d]
    WHERE [d].[Id] = @__id_0
) AS [t]
LEFT JOIN [Gifts] AS [g] ON [t].[Id] = [g].[DonorId]
ORDER BY [t].[Id]
2025-12-31 23:53:47.713 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 326.9484ms.
2025-12-31 23:53:47.728 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-12-31 23:53:47.738 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 403.2737ms
2025-12-31 23:53:47.745 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2025-12-31 23:53:47.755 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 404 null text/plain; charset=utf-8 529.7829ms
2025-12-31 23:54:04.691 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift - application/json 137
2025-12-31 23:54:04.725 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2025-12-31 23:54:04.731 +02:00 [INF] Route matched with {action = "Post", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(WebApiProject.Models.DTO.GiftDTO) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 23:54:04.770 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.Post (WebApiProject) - Validation state: "Valid"
2025-12-31 23:54:04.775 +02:00 [INF] Fetching donor with id 1
2025-12-31 23:54:04.875 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Email], [t].[Name], [t].[Phone], [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name]
FROM (
    SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
    FROM [Donors] AS [d]
    WHERE [d].[Id] = @__id_0
) AS [t]
LEFT JOIN [Gifts] AS [g] ON [t].[Id] = [g].[DonorId]
ORDER BY [t].[Id]
2025-12-31 23:54:04.882 +02:00 [INF] Adding new gift
2025-12-31 23:54:05.172 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CardPrice], [Category], [DonorId], [IsRaffled], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-31 23:54:05.243 +02:00 [INF] Gift added successfully
2025-12-31 23:54:05.251 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.Post (WebApiProject), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 475.5712ms.
2025-12-31 23:54:05.262 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-12-31 23:54:05.269 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.Post (WebApiProject) in 532.5216ms
2025-12-31 23:54:05.276 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.Post (WebApiProject)'
2025-12-31 23:54:05.281 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift - 200 null text/plain; charset=utf-8 590.0077ms
2025-12-31 23:54:35.213 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7164/api/Gift/3/raffle - null 0
2025-12-31 23:54:35.234 +02:00 [INF] Executing endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 23:54:35.245 +02:00 [INF] Route matched with {action = "RaffleGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RaffleGift(Int32) on controller WebApiProject.Controllers.GiftController (WebApiProject).
2025-12-31 23:54:35.287 +02:00 [INF] Executing action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) - Validation state: "Valid"
2025-12-31 23:54:35.375 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CardPrice], [t].[Category], [t].[DonorId], [t].[IsRaffled], [t].[Name], [t].[Id0], [t].[Email], [t].[Name0], [t].[Phone], [t0].[Id], [t0].[GiftId], [t0].[IsDraft], [t0].[Quantity], [t0].[UserId], [t0].[Id0], [t0].[Email], [t0].[PasswordHash], [t0].[Phone], [t0].[Role], [t0].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CardPrice], [g].[Category], [g].[DonorId], [g].[IsRaffled], [g].[Name], [d].[Id] AS [Id0], [d].[Email], [d].[Name] AS [Name0], [d].[Phone]
    FROM [Gifts] AS [g]
    INNER JOIN [Donors] AS [d] ON [g].[DonorId] = [d].[Id]
    WHERE [g].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [s].[Id], [s].[GiftId], [s].[IsDraft], [s].[Quantity], [s].[UserId], [u].[Id] AS [Id0], [u].[Email], [u].[PasswordHash], [u].[Phone], [u].[Role], [u].[UserName]
    FROM [Shoppings] AS [s]
    INNER JOIN [Users] AS [u] ON [s].[UserId] = [u].[Id]
) AS [t0] ON [t].[Id] = [t0].[GiftId]
ORDER BY [t].[Id], [t].[Id0], [t0].[Id]
2025-12-31 23:54:35.384 +02:00 [WRN] No confirm shoppings for gift 3
2025-12-31 23:54:35.385 +02:00 [INF] Executed action method WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 94.3634ms.
2025-12-31 23:54:35.387 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-12-31 23:54:35.389 +02:00 [INF] Executed action WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject) in 137.4531ms
2025-12-31 23:54:35.403 +02:00 [INF] Executed endpoint 'WebApiProject.Controllers.GiftController.RaffleGift (WebApiProject)'
2025-12-31 23:54:35.404 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7164/api/Gift/3/raffle - 400 null text/plain; charset=utf-8 191.4749ms
